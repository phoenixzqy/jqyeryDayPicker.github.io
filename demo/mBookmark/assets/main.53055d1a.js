import{C as Ne,c as Pe,a as x,b as w,d,t as v,e as U,u as E,f as C,s as D,o as J,i as y,g as Se,h as W,S as z,j as ne,k as ke,l as be,F as Q,m as je,n as fe,r as at}from"./vendor.40dbf55d.js";import{Octokit as Fe}from"https://cdn.skypack.dev/octokit?dts";const lt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))r(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const c of f.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerpolicy&&(f.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?f.credentials="include":u.crossorigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function r(u){if(u.ep)return;u.ep=!0;const f=a(u);fetch(u.href,f)}};lt();var re;(function(t){t.Up="ArrowUp",t.Down="ArrowDown",t.Left="ArrowLeft",t.Right="ArrowRight"})(re||(re={}));const ct="Enter";var X;(function(t){t.bookemark="bookmark",t.application="application"})(X||(X={}));var ie;(function(t){t.feed="feed",t.normal="normal",t.widgets="widgets"})(ie||(ie={}));const S="miniEntryGroup";var B;(function(t){t[t.group=0]="group",t[t.addEntry=1]="addEntry",t[t.editEntry=2]="editEntry",t[t.search=3]="search",t[t.application=4]="application"})(B||(B={}));var N;(function(t){t.homepage="homepage",t.groupPopover="groupPopover",t.addBookmarkPopover="addBookmarkPopover",t.editBookmarkPopover="editBookmarkPopover",t.searchPopover="searchPopover",t.applicationPopover="applicationPopover"})(N||(N={}));const we={x:90,y:110};var ee;(function(t){t.video="video",t.image="image"})(ee||(ee={}));const dt={appearance:{wallpaperUrl:null,wallpaperType:"video"},features:{feedPageUrl:"https://juejin.cn/"}},ut=[{type:"feed"},{type:"normal",items:[{id:"b943abc2-5431-4774-9a99-ed4210fd682f",type:"miniEntryGroup",name:"About Felix",items:[{id:"734d85f5-4adc-4df5-8366-0104440c1302",type:"bookmark",url:"https://github.com/phoenixzqy",icon:"https://github.githubassets.com/favicons/favicon.svg",name:"Github",description:"GitHub is where people build software. More than 73 million people use GitHub to discover, fork, and contribute to over 200 million projects.",keywords:["tech","readings"]},{id:"019d3dc5-83f8-4b96-8c3e-4e0f5687782a",type:"bookmark",url:"https://phoenixzqy.github.io",icon:"",name:"Blog",description:"Felix's blog site, powered by Github page",keywords:["blog","readings"]},{id:"ae85a034-e663-47df-8144-69dd6e65ab03",type:"bookmark",url:"https://www.linkedin.com/in/qiyu-zhao-b02352b6/",icon:"https://static-exp1.licdn.com/sc/h/al2o9zrvru7aqj8e1x2rzsrca",name:"LinkedIn",description:"500 million+ members | Manage your professional identity. Build and engage with your professional network. Access knowledge, insights and opportunities.",keywords:["social"]}]},{id:"pokeclicker",type:"application"}]}];var pt={siteConfig:dt,homepages:ut};const oe="mbookmark_gist_database",Le=100;class gt{constructor(){const e=this.getToken();e&&(this.octokit=new Fe({auth:e}))}getLocalConfig(){let e=window.localStorage.getItem("localConfig");return e||(e=JSON.stringify({token:"",gistid:""}),window.localStorage.setItem("localConfig",e)),JSON.parse(e)}setLocalConfig(e){window.localStorage.setItem("localConfig",JSON.stringify(e)),e.token&&(this.octokit=new Fe({auth:e.token}))}clearLocalConfig(){window.localStorage.removeItem("localConfig")}getToken(){return this.getLocalConfig().token}async initData(){if(this.getGistId())return this.getData();let e=1,a=Le;for(;a>=Le;){let c=(await this.getGists(e++)).data;a=c.length;for(let p=0;p<c.length;p++)if(Object.keys(c[p].files).includes(oe)){let o=(await this.getGist(c[p].id)).data;return this.setLocalConfig({token:this.getToken(),gistid:o.id}),JSON.parse(this.decrypt(o.files[oe].content))}}const u=(await this.createGist({[oe]:{filename:oe,content:this.encrypt(JSON.stringify(pt))}},"This is the mBookmark database file")).data;return this.setLocalConfig({token:this.getToken(),gistid:u.id}),JSON.parse(this.decrypt(u.files[oe].content))}async getData(){let{data:e}=await this.getGist(this.getGistId());return JSON.parse(this.decrypt(e.files[oe].content))}async updateData(e){await this.updateGist(this.getGistId(),{[oe]:{content:this.encrypt(e)}})}async deleteData(){await this.deleteGist(this.getGistId())}getGistId(){return this.getLocalConfig().gistid}async getGists(e=1){return this.octokit.request("GET /gists",{per_page:Le,page:e})}async getGist(e){return this.octokit.request("GET /gists/{gist_id}",{gist_id:e})}async createGist(e,a,r){return this.octokit.request("POST /gists",{description:a||"",files:e,public:r||!1})}async updateGist(e,a,r){return this.octokit.request("PATCH /gists/{gist_id}",{gist_id:e,description:r,files:a})}async deleteGist(e){return this.octokit.request("DELETE /gists/{gist_id}",{gist_id:e})}encrypt(e){return Ne.AES.encrypt(e,this.getToken()).toString()}decrypt(e){return Ne.AES.decrypt(e,this.getToken()).toString(Ne.enc.Utf8)}}const te=new gt;var se;(function(t){t[t.up=0]="up",t[t.down=1]="down",t[t.left=2]="left",t[t.right=3]="right"})(se||(se={}));function ze(t,e){if(!t||!e||e.x-t.x==0&&e.y-t.y==0)return!1;const a=e.x-t.x,r=e.y-t.y;return Math.abs(a)<50&&Math.abs(r)<50?!1:Math.abs(a)>Math.abs(r)?a>0?3:2:r>0?1:0}function De(){var t=new Date().getTime(),e=typeof performance!="undefined"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var r=Math.random()*16;return t>0?(r=(t+r)%16|0,t=Math.floor(t/16)):(r=(e+r)%16|0,e=Math.floor(e/16)),(a==="x"?r:r&3|8).toString(16)})}function he(){return De().split("-")[0]}function _e(t){return{x:t.offsetWidth,y:t.offsetHeight}}function de(t){var e=t.getBoundingClientRect(),a=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop;return{top:e.top+r,left:e.left+a}}const A=window.M;A.showLoader=()=>{const t=document.querySelector(".global-loader-container");t&&(t.style.display="flex")};A.hideLoader=()=>{const t=document.querySelector(".global-loader-container");t&&(t.style.display="none")};const R=Pe();let Ie;(function(t){t[t.normal=0]="normal",t[t.edit=1]="edit"})(Ie||(Ie={}));function ft(t){const[e,a]=x(Ie.normal),[r,u]=x({siteConfig:{},homepages:[]}),f=w(()=>{const o=r().homepages[1]?.items||[];let l=[];for(let i in o)if(o[i].type===S)for(let n in o[i].items)l=l.concat(o[i].items[n].keywords||[]);else l=l.concat(o[i].keywords||[]);return l});function c(o,l){let i=o.homepages[1].items;for(let n in i){if(i[n].type===S){for(let s in i[n].items)if(l===i[n].items[s].id){let g=i[n].items.splice(s,1)[0];return i[n].items.length===0&&i.splice(n,1),g}}if(l===i[n].id)return i.splice(n,1)[0]}return!1}async function p(o){A.showLoader(),JSON.parse(JSON.stringify(r()));let l=o(JSON.parse(JSON.stringify(r())));await te.updateData(JSON.stringify(l));let i=await te.getData();i?(A.toast({html:"Successfully saved!",classes:"green"}),u(i)):A.toast({html:"Failed to save!",classes:"red"}),A.hideLoader()}const h={appMode:e,setAppMode:a,userConfig:r,setUserConfig:u,keywords:f,getUserSiteConfig:w(()=>r().siteConfig),setUserSiteConfig:o=>{p(l=>(l.siteConfig={...o},JSON.parse(JSON.stringify(l))))},getUserHomepageConfig:w(()=>r().homepages),addEntry:(o,l)=>{p(i=>{const n=i.homepages[1].items;if(!l)n.push(o);else for(let s in n)l===n[s].id&&n[s].type===S&&n[s].items.push(o);return JSON.parse(JSON.stringify(i))})},removeEntry:o=>{let l=!1;return p(i=>{c(i,o);let n=i.homepages[1].items;for(let s=n.length-1;s>=0;s--)n[s].type===S&&n[s].items.length===0&&(n.splice(s,1),l=!0);return JSON.parse(JSON.stringify(i))}),l},updateEntry:o=>{const l=o.id;p(i=>{let n=i.homepages[1].items;for(let s in n)if(n[s].type!==S)l===n[s].id&&(n[s]={...n[s],...o});else for(let g in n[s].items)l===n[s].items[g].id&&(n[s].items[g]={...n[s].items[g],...o});return JSON.parse(JSON.stringify(i))})},updateMiniGroup:(o,l)=>{p(i=>{let n=i.homepages[1].items;for(let s in n)n[s].type===S&&o===n[s].id&&(n[s]={...n[s],...l});return JSON.parse(JSON.stringify(i))})},moveEntryIntoMiniGroup:(o,l)=>{p(i=>{let n=c(i,o),s=i.homepages[1].items;for(let g in s)l===s[g].id&&s[g].type===S&&s[g].items.push(n);return JSON.parse(JSON.stringify(i))})},createMiniGroupBy2Entry:(o,l)=>{p(i=>{let n=c(i,o),s=i.homepages[1].items;for(let g in s)if(s[g].id===l&&s[g].type!==S){const m=s[g];s[g]={id:De(),type:S,name:"new group",items:[m,n]};break}return JSON.parse(JSON.stringify(i))})},reOrderEntries:(o,l,i,n)=>{p(s=>{let g=s.homepages[1].items;if(n){e:for(let m in g)if(!(g[m].type!==S||g[m].id!==n)){if(i==="last"){g[m].items.length>1&&g[m].items.push(c(s,o));break}else for(let I in g[m].items)if(g[m].items[I].id===i){g[m].items.splice(l==="before"?I:~~I+1,0,c(s,o));break e}}}else if(i==="last")g.push(c(s,o));else for(let m in g)if(g[m].id===i){g.splice(l==="before"?m:~~m+1,0,c(s,o));break}return JSON.parse(JSON.stringify(s))})},moveEntryOutFromMoniGroup:(o,l)=>{p(i=>{let n=c(i,o);return l>=0?i.homepages[1].items.splice(l,0,n):i.homepages[1].items.push(n),JSON.parse(JSON.stringify(i))})}};return d(R.Provider,{value:h,get children(){return t.children}})}const ht=v('<div class="homepage-app-container"><div class="feed-homepage-back-btn"><i class="material-icons">home</i></div><div class="feed-homepage-container"><div class="feed-homepage-ifram-container"><iframe class="feed-homepage-iframe" title="description"></iframe></div></div></div>');function mt(t){const{getUserSiteConfig:e}=E(R),{backToHomepage:a}=t;return(()=>{const r=ht.cloneNode(!0),u=r.firstChild,f=u.nextSibling,c=f.firstChild,p=c.firstChild;return u.$$click=()=>a(),C(()=>D(p,"src",e().features.feedPageUrl)),r})()}U(["click"]);const yt=v('<div class="font-app-icon fullscreen-app-icon"><i class="material-icons"></i></div>'),vt="fullscreen";function $t(t){const[e,a]=x(!1);return J(()=>{document.addEventListener("fullscreenchange",function(){a(!e())})}),(()=>{const r=yt.cloneNode(!0),u=r.firstChild;return r.$$click=()=>{e()?document.exitFullscreen():document.body.requestFullscreen()},y(u,()=>e()?"fullscreen_exit":"fullscreen"),r})()}U(["click"]);const Oe={id:vt,name:"Fullscreen",description:"Enter fullscreen mode",icon:$t},j=Pe(),Ke={type:N.homepage};function kt(t){const[e,a]=x([]),[r,u]=x(0),[f,c]=x({}),[p,h]=x(Ke);function o(s){if(s.show)s.show();else if(s.ref){const g=s.ref;g.classList.remove("screen-layer-hide"),g.classList.add("screen-layer-show")}}function l(s){if(s.hide&&s.hide(),s.ref){const g=s.ref;g.classList.remove("screen-layer-show"),g.classList.add("screen-layer-hide")}}function i(s){return f()[s.type]!==void 0}const n={currentScreenLayer:p,layers:f,register:s=>{f()[s.type]||(s.type!==Ke.type?l(s):(a(g=>(g.push(s),g)),h(s)),c(g=>(g[s.type]=s,g)))},showLayer(s){if(!i(s)){console.error(`invalid/unregistered screen type: ${JSON.stringify(s)}`);return}if(p().type===s.type)return;l(p());const g={...f()[s.type],...s};r()===e().length-1?a(m=>(m.push(g),m)):a(m=>(m.length=r()+1,m.push(g),m)),u(r()+1),h(g),c(m=>(m[g.type]=g,m)),o(g)},backToPrevLayer:()=>{r()!==0&&(h(s=>{l(s);const g=e()[r()-1];return o(g),g}),u(r()-1))},goToNextLayer:()=>{r()!==e().length-1&&(h(s=>{l(s);const g=e()[r()+1];return o(g),g}),u(r()+1))}};return d(j.Provider,{value:n,get children(){return t.children}})}const ue=Pe();function bt(t){const[e,a]=x({}),[r,u]=x(void 0),{showLayer:f}=E(j),c={applications:e,currentApplication:r,launchApplication:p=>{if(!Ge[p])throw new Error(`Invalid application id: ${p}`);a(h=>(h[p]={id:p,application:Ge[p].application},h)),u(p),f({type:N.applicationPopover})},killApplication:p=>{a(h=>(h[p]=void 0,h))}};return d(ue.Provider,{value:c,get children(){return t.children}})}var wt="/demo/mBookmark/assets/Pokeball.08405e7f.svg";const _t=v('<div class="image-app-icon pokeclicker-app-icon"><img></div>'),Xe="pokeclicker";function Et(t){const{launchApplication:e}=E(ue);return(()=>{const a=_t.cloneNode(!0),r=a.firstChild;return a.$$click=()=>{e(Xe)},D(r,"src",wt),a})()}U(["click"]);const xt=v('<div><iframe src="https://g8hh.github.io/pokeclicker/" frameborder="0"></iframe></div>');function Ct(t){return(()=>{const e=xt.cloneNode(!0),a=e.firstChild;return e.style.setProperty("width","100%"),e.style.setProperty("height","100%"),a.style.setProperty("width","100%"),a.style.setProperty("height","100%"),e})()}const Ye={id:Xe,name:"Poke Clicker",description:"pokeclicker game",icon:Et,application:Ct};var Nt="/demo/mBookmark/assets/qrcode.3b9df612.png";const Pt=v('<div class="image-app-icon qrcode-app-icon"><img></div>'),We="qrcodescanner";function St(t){const{launchApplication:e}=E(ue);return(()=>{const a=Pt.cloneNode(!0),r=a.firstChild;return a.$$click=()=>{e(We)},D(r,"src",Nt),a})()}U(["click"]);const Lt=v("<div>QRCode Scanner</div>");function Dt(t){return Lt.cloneNode(!0)}const Ae={id:We,name:"QRCode Scanner",description:"Scan qrcode",icon:St,application:Dt},It=v('<div class="font-app-icon readme-app-icon"><i class="material-icons">local_library</i></div>'),Qe="readme";function Ot(t){const{launchApplication:e}=E(ue);return(()=>{const a=It.cloneNode(!0);return a.$$click=()=>{e(Qe)},a})()}U(["click"]);const At=v("<div>ReadMe</div>");function Tt(t){return(()=>{const e=At.cloneNode(!0);return e.style.setProperty("width","100%"),e.style.setProperty("height","100%"),e})()}const Te={id:Qe,name:"ReadMe",description:"mBookmark user instructions",icon:Ot,application:Tt};var Mt="/demo/mBookmark/assets/settings.17bb5709.png";const Bt=v('<div class="image-app-icon settings-app-icon"><img></div>'),Ve="settings";function Ht(t){const{launchApplication:e}=E(ue);return(()=>{const a=Bt.cloneNode(!0),r=a.firstChild;return a.$$click=()=>{e(Ve)},D(r,"src",Mt),a})()}U(["click"]);const Gt=v('<i class="material-icons left"></i>'),Ut=v("<a></a>");function ae(t){const{disabled:e=!1,className:a="",size:r,onClick:u,style:f={},title:c=""}=t,p=w(()=>{let h="waves-effect waves-light";return e&&(h+=" disabled"),r==="small"?h+=" btn-small":r==="large"?h+=" btn-large":h+=" btn",a&&(h+=` ${a}`),h});return(()=>{const h=Ut.cloneNode(!0);return Se(h,"click",u,!0),W(h,f),D(h,"title",c),y(h,d(z,{get when(){return t.icon},get children(){const o=Gt.cloneNode(!0);return y(o,()=>t.icon),o}}),null),y(h,()=>t.children,null),C(()=>h.className=p()),h})()}U(["click"]);const qt=v("<div></div>");function Jt(t){let e;const{className:a="",style:r={},useContextMenu:u=!1}=t,f=he(),c=w(()=>t.menuItems||[]),p=o=>{o.preventDefault(),o.stopPropagation(),document.getElementById(f).remove()},h=o=>{o.preventDefault(),o.stopPropagation();let l=document.createElement("div");l.id=f,l.classList.add("mbm-dropdown-container");let i=`<ul class="dropdown-content">
      ${c().map(s=>`<li><a href="#!">${s.label}</a></li>`).join("")}
    </ul>`;l.innerHTML=i,Array.from(l.querySelectorAll("li")).forEach((s,g)=>{typeof c()[g].onClick=="function"&&(s.onclick=m=>{m.preventDefault(),m.stopPropagation(),c()[g].onClick(m),p(m)})});const n=l.querySelector("ul");n.style.left=o.clientX+"px",n.style.top=o.clientY+"px",l.onclick=s=>p(s),l.oncontextmenu=s=>p(s),document.body.appendChild(l)};return J(()=>{u?e.oncontextmenu=o=>h(o):e.onclick=o=>h(o)}),(()=>{const o=qt.cloneNode(!0),l=e;return typeof l=="function"?l(o):e=o,D(o,"data-target",f),W(o,r),o.className=a,y(o,()=>t.children),o})()}const Me=v("<label></label>"),Be=v('<span class="helper-text"></span>'),Rt=v('<div><input class="validate"></div>'),jt=v('<div><textarea class="validate"></textarea></div>'),Ft=v('<div><label><i class="material-icons left">search</i></label><input></div>'),zt=v('<div class="input-field"><div class="chips chips-placeholder chips-autocomplete"></div></div>'),Kt=v('<div class="input-field"><select></select><label></label></div>'),Xt=v("<option></option>");function V(t){const e=he(),{type:a="text",onChange:r,onInput:u,style:f={},className:c="",ref:p,disabled:h=!1,maxlength:o}=t,l={type:a,onChange:r,onInput:u,ref:p,disabled:h,maxlength:o},i=w(()=>t.value);return(()=>{const n=Rt.cloneNode(!0),s=n.firstChild;return n.className=`input-field ${c}`,W(n,f),D(s,"id",e),ne(s,l,!1,!1),y(n,d(z,{get when(){return t.label},get children(){const g=Me.cloneNode(!0);return D(g,"for",e),y(g,()=>t.label),C(()=>g.classList.toggle("active",i())),g}}),null),y(n,d(z,{get when(){return t.helperText},get children(){const g=Be.cloneNode(!0);return y(g,()=>t.helperText),g}}),null),C(()=>s.value=i()),n})()}function Ze(t){const e=he(),{type:a="text",onChange:r,onInput:u,style:f={},className:c="",ref:p,rows:h,cols:o,maxlength:l}=t,i={type:a,onChange:r,onInput:u,ref:p,rows:h,cols:o,maxlength:l},n=w(()=>t.value);return(()=>{const s=jt.cloneNode(!0),g=s.firstChild;return s.className=`input-field mbm-textarea ${c}`,W(s,f),D(g,"id",e),ne(g,i,!1,!1),y(s,d(z,{get when(){return t.label},get children(){const m=Me.cloneNode(!0);return D(m,"for",e),y(m,()=>t.label),C(()=>m.classList.toggle("active",n())),m}}),null),y(s,d(z,{get when(){return t.helperText},get children(){const m=Be.cloneNode(!0);return y(m,()=>t.helperText),m}}),null),C(()=>g.value=n()),s})()}function Yt(t){const{type:e="text",onChange:a,onInput:r,style:u={},className:f="",ref:c}=t,p={type:e,onChange:a,onInput:r,ref:c},h=w(()=>t.value||"");return(()=>{const o=Ft.cloneNode(!0),l=o.firstChild,i=l.nextSibling;return o.className=`mbm-search-bar ${f}`,W(o,u),ne(i,p,!1,!1),C(()=>i.value=h()),o})()}function et(t){const{options:e={},label:a="",helperText:r="",onChange:u=s=>{}}=t,f=he(),[c,p]=x(!1),[h,o]=x(),l=()=>{p(!0)},i=()=>{p(!1)},n=()=>{const s=A.Chips.getInstance(document.getElementById(f)).chipsData;u(s)};return ke(()=>{h()&&A.Chips.init(document.getElementById(f),{...t.options,onChipAdd:n,onChipDelete:n})}),J(()=>{let s=document.getElementById(f);s&&(A.Chips.init(document.getElementById(f),{...e,onChipAdd:n,onChipDelete:n}),o(()=>{const g=s.querySelector("input");return g.addEventListener("focus",l),g.addEventListener("blur",()=>i),g}))}),be(()=>{try{h()&&(h().removeEventListener("focus",l),h().removeEventListener("blur",()=>i))}catch(s){console.error(s)}}),(()=>{const s=zt.cloneNode(!0),g=s.firstChild;return D(g,"id",f),y(s,d(z,{when:a,get children(){const m=Me.cloneNode(!0);return D(m,"for",f),m.style.setProperty("top","-25px"),y(m,a),C(()=>m.classList.toggle("keywords-input-label-active",c())),m}}),null),y(s,d(z,{when:r,get children(){const m=Be.cloneNode(!0);return m.style.setProperty("margin-top","-14px"),y(m,r),m}}),null),s})()}function Wt(t){let e;const{label:a="",options:r=[],onSelected:u}=t,[f,c]=x(void 0);let p=he();return J(()=>{const h=document.getElementById(p),o=A.FormSelect.init(h);c(o);let l=Array.from(e.querySelectorAll(".select-dropdown li"))||[];const i=e.querySelector("ul").id;l.forEach(n=>n.addEventListener("click",s=>{const g=s.target?.parentElement?.id.replace(i,"");console.log(g),g!==void 0&&typeof u=="function"&&u(r[g].value)})),l.forEach(n=>n.addEventListener("keyup",s=>{if(s.key!==ct)return;const g=s.target?.parentElement?.id.replace(i,"");g!==void 0&&typeof u=="function"&&u(r[g].value)}))}),be(()=>{f().destroy()}),(()=>{const h=Kt.cloneNode(!0),o=h.firstChild,l=o.nextSibling,i=e;return typeof i=="function"?i(h):e=h,D(o,"id",p),y(o,d(Q,{each:r,children:n=>(()=>{const s=Xt.cloneNode(!0);return y(s,()=>n.display),C(g=>{const m=n.value,I=!!n.disabled,K=!!n.selected;return m!==g._v$&&(s.value=g._v$=m),I!==g._v$2&&(s.disabled=g._v$2=I),K!==g._v$3&&(s.selected=g._v$3=K),g},{_v$:void 0,_v$2:void 0,_v$3:void 0}),s})()})),y(l,a),h})()}const tt=v("<div></div>"),Ee={};for(let t=1;t<=12;t++)for(let e of["s","m","l","xl"])Ee[`${e}${t}`]=`${e}${t}`,Ee[`offset-${e}${t}`]=`offset-${e}${t}`;function q(t){const{className:e="",style:a={},onClick:r}=t;return(()=>{const u=tt.cloneNode(!0);return Se(u,"click",r,!0),u.className=`row ${e}`,W(u,a),y(u,()=>t.children),u})()}function L(t){const{style:e={}}=t,a=w(()=>{let r="col";return Object.keys(t).forEach(u=>{Ee[u]&&(r+=` ${Ee[u]}`)}),t.className&&(r+=` ${t.className}`),r});return(()=>{const r=tt.cloneNode(!0);return W(r,e),y(r,()=>t.children),C(()=>r.className=a()),r})()}U(["click"]);const Qt=v('<div class="global-loader-container"><div class="preloader-wrapper big active"><div class="spinner-layer spinner-blue"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div><div class="spinner-layer spinner-red"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div><div class="spinner-layer spinner-yellow"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div><div class="spinner-layer spinner-green"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div></div></div>');function Vt(t){return(()=>{const e=Qt.cloneNode(!0);return e.style.setProperty("display","none"),e})()}const Zt=v("<h4>Settings</h4>"),en=v("<h5>Account</h5>"),tn=v("<h5>Appearance</h5>"),nn=v("<h5>Feature</h5>"),rn=v('<div class="settings-app-wrapper"></div>');function on(t){const{getUserSiteConfig:e,setUserSiteConfig:a}=E(R),[r,u]=x(e()),f=w(()=>{let o=te.getToken();return o?o.substring(0,5)+"*".repeat(20)+o.substring(o.length-5,o.length):""}),c=o=>l=>{let i;const n=o.split(".");n[1]==="wallpaperType"?i=l:i=l.target.value,u(s=>(s[n[0]][n[1]]=i,s))},p=()=>{a(r())},h=()=>{te.clearLocalConfig(),document.location.reload()};return(()=>{const o=rn.cloneNode(!0);return y(o,d(q,{get children(){return[(()=>{const l=Zt.cloneNode(!0);return l.style.setProperty("font-weight","bold"),l})(),d(L,{s12:!0,get children(){return[d(q,{get children(){return[en.cloneNode(!0),d(L,{s10:!0,get children(){return d(V,{disabled:!0,get value(){return f()},label:"Github Token"})}}),d(L,{s2:!0,get children(){return d(ae,{onClick:h,icon:"exit_to_app",className:"btn-floating",style:{"background-color":"rgb(234 85 85)",top:"7.5px"}})}}),tn.cloneNode(!0),d(L,{s12:!0,get children(){return d(Wt,{label:"Wallpaper Type",get onSelected(){return c("appearance.wallpaperType")},get options(){return[{value:ee.image,selected:ee.image===r().appearance.wallpaperType,display:ee.image.toUpperCase()},{value:ee.video,selected:ee.video===r().appearance.wallpaperType,display:ee.video.toUpperCase()}]}})}}),d(L,{s12:!0,get children(){return d(V,{get onChange(){return c("appearance.wallpaperUrl")},label:"Wallpaper Url",get value(){return r().appearance.wallpaperUrl},maxlength:"2000",helperText:"Max length: 2000"})}}),nn.cloneNode(!0),d(L,{s12:!0,get children(){return d(V,{get onChange(){return c("features.feedPageUrl")},label:"Feed Page Url",get value(){return r().features.feedPageUrl},maxlength:"2000",helperText:"Max length: 2000"})}})]}}),d(q,{className:"submit-button",style:{"text-align":"center"},get children(){return d(ae,{onClick:p,icon:"save",children:"Save Changes"})}})]}})]}})),o})()}const He={id:Ve,name:"Settings",description:"mBookmark Settings",icon:Ht,application:on},Ge={[Oe.id]:Oe,[Ae.id]:Ae,[Te.id]:Te,[He.id]:He,[Ye.id]:Ye},sn={enableOnHold:!0,onHoldTime:200},me=[-1,-1];class an{constructor(e){this.draggingElement=void 0,this.isDragging=!1,this.initKeyDownPos=[...me],this.currentKeyPos=[...me],this.options={...sn,...e}}findParentDraggableElement(e){if(e.attributes.getNamedItem("is-draggable"))return e;if(!!e.parentElement)return this.findParentDraggableElement(e.parentElement)}findParentHoverableElement(e){if(e.attributes.getNamedItem("is-hoverable"))return e;if(!!e.parentElement)return this.findParentDraggableElement(e.parentElement)}initDragging(e,a){this.initKeyDownPos.toString()===this.currentKeyPos.toString()&&this.currentKeyPos.toString()!==me.toString()&&(this.draggingElement.style.width=this.draggingElement.offsetWidth+"px",this.draggingElement.style.height=this.draggingElement.offsetHeight+"px",this.draggingElement.style.left=(this.currentKeyPos[0]-this.draggingElement.offsetWidth/2).toString()+"px",this.draggingElement.style.top=(this.currentKeyPos[1]-this.draggingElement.offsetHeight/2).toString()+"px",this.draggingElement.style.transitionDuration="unset",this.draggingElement.style.pointerEvents="none",this.draggingElement.style.zIndex="1",this.draggingElement.style.position="fixed",this.isDragging=!0,a&&this.isDragging&&a(e,this.draggingElement))}mouseDownHandler(e,a){this.draggingElement=this.findParentDraggableElement(e.target),!!this.draggingElement&&(this.initKeyDownPos=[e.clientX,e.clientY],this.currentKeyPos=[e.clientX,e.clientY],this.options.enableOnHold?setTimeout(()=>{this.initDragging(e,a)},300):this.initDragging(e,a))}mouseMoveHandler(e,a){!this.draggingElement||(this.currentKeyPos=[e.clientX,e.clientY],this.isDragging&&(this.draggingElement.style.left=(this.currentKeyPos[0]-this.draggingElement.offsetWidth/2).toString()+"px",this.draggingElement.style.top=(this.currentKeyPos[1]-this.draggingElement.offsetHeight/2).toString()+"px"),a&&a(e,this.draggingElement))}mouseUpHandler(e,a){!this.draggingElement||(this.isDragging=!1,this.initKeyDownPos=[...me],this.currentKeyPos=[...me],this.draggingElement.style.transform="scale(1)",this.draggingElement.style.left=void 0,this.draggingElement.style.top=void 0,this.draggingElement.style.pointerEvents="all",a&&a(e,this.draggingElement),this.draggingElement=void 0)}mouseEnterHandler(e,a){if(!this.draggingElement||!this.isDragging)return;const r=this.findParentHoverableElement(e.target);a&&a(e,r,this.draggingElement)}mouseOverHandler(e,a){if(!this.draggingElement||!this.isDragging)return;const r=this.findParentHoverableElement(e.target);a&&a(e,r,this.draggingElement)}mouseLeaveHandler(e,a){if(!this.draggingElement||!this.isDragging)return;const r=this.findParentHoverableElement(e.target);a&&a(e,r,this.draggingElement)}getData(){return this.data}setData(e){this.data=e}clearData(){this.data=void 0}onDragStart(e,a){e.addEventListener("mousedown",r=>{this.mouseDownHandler(r,a)})}onDragMove(e,a){e.addEventListener("mousemove",r=>{this.mouseMoveHandler(r,a)})}onDragEnd(e,a){e.addEventListener("mouseup",r=>{this.mouseUpHandler(r,a),this.clearData()})}onDragEnter(e,a){e.addEventListener("mouseenter",r=>{this.mouseEnterHandler(r,a)})}onDragOver(e,a){e.addEventListener("mouseover",r=>{this.mouseOverHandler(r,a)})}onDragLeave(e,a){e.addEventListener("mouseleave",r=>{this.mouseLeaveHandler(r,a)})}}const b=new an,ln=v('<span class="entry-title"></span>');function Ue(t){const e=w(()=>t.name);return(()=>{const a=ln.cloneNode(!0);return y(a,e),a})()}const cn=v('<div class="entry-wrapper"><div class="entry-container"></div></div>');function dn(t){let e;const{id:a,style:r={},isDraggable:u=!1}=t,f={id:a,style:r},c=w(()=>t.config),p=w(()=>{if(!!c().id)return Ge[c().id]}),h=p()?.icon,o={"is-draggable":u,"is-hoverable":u,"is-droppable":u};return J(()=>{u&&(b.onDragStart(e,(l,i)=>{i.style.transform="scale(1.2)",b.setData({dragging:c(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0})}),b.onDragOver(e,(l,i,n)=>{if(l.target.classList.contains("entry-container"))i.style.transform="scale(1.1)",b.setData({...b.getData(),dropOn:c(),dropBefore:void 0,dropAfter:void 0});else{i.style.transform="scale(1)";let g={...b.getData(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0};const m=de(n),I=de(i);m.left<I.left?g.dropBefore=c():g.dropAfter=c(),b.setData(g)}}),b.onDragLeave(e,(l,i,n)=>{i!==n&&(i.style.transform="scale(1)",b.setData({...b.getData(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0}))}))}),(()=>{const l=cn.cloneNode(!0),i=l.firstChild,n=e;return typeof n=="function"?n(l):e=l,ne(l,f,!1,!0),ne(l,o,!1,!0),i.style.setProperty("background-image","none"),y(i,d(h,{})),y(l,d(Ue,{get name(){return p()?.name}}),null),C(s=>{const g=X.application,m=`${p()?.name}: ${p()?.description||""}`;return g!==s._v$&&D(l,"entry-type",s._v$=g),m!==s._v$2&&D(i,"title",s._v$2=m),s},{_v$:void 0,_v$2:void 0}),l})()}const un=v('<div class="entry-container"></div>'),pn=v('<div class="entry-wrapper" is-draggable is-hoverable is-droppable></div>');function gn(t){let e;const{showLayer:a,backToPrevLayer:r,currentScreenLayer:u}=E(j),{removeEntry:f}=E(R),c=w(()=>t.config),{id:p,style:h={}}=t,o={id:p,style:h};function l(i){window.open(c().url)}return J(()=>{b.onDragStart(e,(i,n)=>{n.style.transform="scale(1.2)",b.setData({dragging:c(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0})}),b.onDragOver(e,(i,n,s)=>{if(i.target.classList.contains("entry-container"))n.style.transform="scale(1.1)",b.setData({...b.getData(),dropOn:c(),dropBefore:void 0,dropAfter:void 0});else{n.style.transform="scale(1)";let m={...b.getData(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0};const I=de(s),K=de(n);I.left<K.left?m.dropBefore=c():m.dropAfter=c(),b.setData(m)}}),b.onDragLeave(e,(i,n,s)=>{n!==s&&(n.style.transform="scale(1)",b.setData({...b.getData(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0}))})}),(()=>{const i=pn.cloneNode(!0),n=e;return typeof n=="function"?n(i):e=i,ne(i,o,!1,!0),y(i,d(Jt,{useContextMenu:!0,options:{autoTrigger:!1,alignment:"left"},menuItems:[{label:"Edit",onClick:()=>{a({type:N.editBookmarkPopover,data:c()})}},{label:"Remove",onClick:()=>{f(c().id)&&u().type===N.groupPopover&&r()}}],style:{height:"55px",width:"55px",position:"relative"},get children(){const s=un.cloneNode(!0);return s.$$click=l,C(g=>{const m=`${c().name}: ${c().description}`,I=c().icon?`url("${c().icon}")`:void 0;return m!==g._v$&&D(s,"title",g._v$=m),I!==g._v$2&&s.style.setProperty("background-image",g._v$2=I),g},{_v$:void 0,_v$2:void 0}),s}}),null),y(i,d(Ue,{get name(){return c().name}}),null),C(()=>D(i,"entry-type",X.bookemark)),i})()}U(["click"]);function qe(t){const e=w(()=>t.config),{style:a={},isDraggable:r=!1}=t,u={style:a,isDraggable:r};function f(c){switch(c){case X.application:return d(dn,fe({get config(){return e()}},u));case X.bookemark:return d(gn,fe({get config(){return e()}},u));default:return null}}return je(()=>f(e().type))}const fn=v('<div class="mini-entry-group-wrapper" is-draggable is-hoverable is-droppable><div class="mini-entry-group-container"></div></div>'),hn=v('<div class="mini-entry-inner-app"></div>');function mn(t){let e;const{showLayer:a}=E(j),r=w(()=>t.config);function u(){a({type:N.groupPopover,data:r()})}return J(()=>{b.onDragStart(e,(f,c)=>{c.style.transform="scale(1.2)",b.setData({dragging:r(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0})}),b.onDragOver(e,(f,c,p)=>{if(f.target.classList.contains("mini-entry-group-container"))c.style.transform="scale(1.1)",b.setData({...b.getData(),dropOn:r(),dropBefore:void 0,dropAfter:void 0});else{c.style.transform="scale(1)";let o={...b.getData(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0};const l=de(p),i=de(c);l.left<i.left?o.dropBefore=r():o.dropAfter=r(),b.setData(o)}}),b.onDragLeave(e,(f,c,p)=>{c.style.transform="scale(1)",b.setData({...b.getData(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0})})}),(()=>{const f=fn.cloneNode(!0),c=f.firstChild,p=e;return typeof p=="function"?p(f):e=f,D(f,"entry-type",S),c.$$click=u,y(c,d(Q,{get each(){return r().items?.slice(0,9)},children:h=>(()=>{const o=hn.cloneNode(!0);return C(()=>o.style.setProperty("background-image",h.icon?`url("${h.icon}")`:void 0)),o})()})),y(f,d(Ue,{get name(){return r().name}}),null),f})()}U(["click"]);const yn=v('<div class="entry-wrapper"><div class="add-entry-button-container" title="Add an app/bookmark"></div></div>');function nt(t){const e=w(()=>t.parentId),{showLayer:a}=E(j);function r(){a({type:N.addBookmarkPopover,data:{parentId:e}})}return(()=>{const u=yn.cloneNode(!0),f=u.firstChild;return f.$$click=r,u})()}U(["click"]);const vn=v("<div></div>");function xe(t){let e;const{style:a,callback:r,holdDuration:u=500}=t,[f,c]=x(!1);let p,h=[-1,-1];return J(()=>{f()||(c(!0),b.onDragMove(e,(o,l)=>{h=[o.clientX,o.clientY],p&&clearInterval(p),p=setTimeout(()=>{o.clientX,h[0],o.clientY===h[1]&&r(o)},u)}),b.onDragLeave(e,()=>{p&&clearInterval(p)}))}),(()=>{const o=vn.cloneNode(!0),l=e;return typeof l=="function"?l(o):e=o,W(o,a),o})()}const $n=v('<div class="homepage-app-container"></div>');function kn(t){let e;const{pageNumber:a,pageCount:r,setCurrentHomepage:u}=t,{createMiniGroupBy2Entry:f,moveEntryIntoMiniGroup:c,reOrderEntries:p}=E(R),h=w(()=>t.config),o=w(()=>t.capacity);return J(()=>{b.onDragMove(e),b.onDragEnd(e,(l,i)=>{i.style.transform="scale(1)";const n=b.getData();n&&n.dragging&&(n.dragging.type!==S&&n.dropOn?.type===S?c(n.dragging.id,n.dropOn.id):n.dragging.type!==S&&n.dropOn?f(n.dragging.id,n.dropOn.id):n.dragging.type===S&&n.dropOn?p(n.dragging.id,"before",n.dropOn.id):n.dropBefore?p(n.dragging.id,"before",n.dropBefore.id):n.dropAfter?p(n.dragging.id,"after",n.dropAfter.id):p(n.dragging.id,"after","last"))})}),(()=>{const l=$n.cloneNode(!0),i=e;return typeof i=="function"?i(l):e=l,y(l,d(xe,{style:{display:"blcok",height:"100%",width:"20px",position:"absolute",top:"0",left:"0"},callback:n=>{a!==1&&u(s=>s-1)}}),null),y(l,d(Q,{get each(){return h().items},children:n=>n.type===S?d(mn,{config:n}):Object.values(X).includes(n.type)?d(qe,{config:n,isDraggable:!0}):null}),null),y(l,d(z,{get when(){return(h()?.items?.length||0)<o()},get children(){return d(nt,{})}}),null),y(l,d(xe,{style:{display:"blcok",height:"100%",width:"20px",position:"absolute",top:"0",right:"0"},callback:n=>{a!==r-2&&u(s=>s+1)}}),null),l})()}const bn=v('<div class="homepage-app-container"></div>');function wn(t){return x(t.config),bn.cloneNode(!0)}const _n=v('<div class="homepage"></div>');function En(t){const[e]=x(t.config);function a(r){switch(r){case ie.feed:return d(mt,fe({get config(){return e()}},t));case ie.normal:return d(kn,fe({get config(){return e()}},t));case ie.widgets:return d(wn,fe({get config(){return e()}},t))}}return(()=>{const r=_n.cloneNode(!0);return y(r,()=>a(e().type)),r})()}var xn="/demo/mBookmark/assets/default_wallpaper.0d87bd85.jpg",Cn="/demo/mBookmark/assets/maxresdefault.c097630c.webp",Nn="/demo/mBookmark/assets/default_live_wallpaper.a9a734d8.webm";const Pn=v('<div class="homepage-background"></div>'),Sn=v("<div></div>"),Ln=v('<video id="background-video" autoplay loop muted><source type="video/webm"></video>');function Dn(t){const{isSignedIn:e}=t,{currentScreenLayer:a}=E(j),{getUserSiteConfig:r}=E(R),u=w(()=>a().type===N.homepage&&e());return(()=>{const f=Pn.cloneNode(!0);return y(f,(()=>{const c=je(()=>r()?.appearance?.wallpaperType===ee.image,!0);return()=>c()?(()=>{const p=Sn.cloneNode(!0);return p.style.setProperty("background-size","cover"),p.style.setProperty("height","100%"),p.style.setProperty("width","100%"),C(h=>{const o=`url("${r()?.appearance?.wallpaperUrl?r()?.appearance?.wallpaperUrl:xn}"`,l=u()?"background-show":"background-hide";return o!==h._v$&&p.style.setProperty("background-image",h._v$=o),l!==h._v$2&&(p.className=h._v$2=l),h},{_v$:void 0,_v$2:void 0}),p})():(()=>{const p=Ln.cloneNode(!0),h=p.firstChild;return C(o=>{const l=r()?.appearance?.wallpaperUrl?r()?.appearance?.wallpaperUrl:Cn,i=u()?"background-show":"background-hide",n=r()?.appearance?.wallpaperUrl?r()?.appearance?.wallpaperUrl:Nn;return l!==o._v$3&&D(p,"poster",o._v$3=l),i!==o._v$4&&(p.className=o._v$4=i),n!==o._v$5&&D(h,"src",o._v$5=n),o},{_v$3:void 0,_v$4:void 0,_v$5:void 0}),p})()})()),f})()}const In=v('<div class="dock-container"><div class="dock-background"></div></div>'),On=[Oe.id,Te.id,Ae.id,He.id];function An(t){const{style:e={}}=t,a={style:e};return(()=>{const r=In.cloneNode(!0);return r.firstChild,ne(r,a,!1,!0),y(r,d(Q,{each:On,children:u=>d(qe,{get config(){return{id:u,type:X.application}}})}),null),r})()}const Tn=v('<div class="homepage-group-tabs"></div>'),Mn=v('<div class="homepage-group"></div>'),Bn=v('<div class="homepage-group-item"></div>'),Hn=v("<span></span>");function rt(t){return Math.floor(t.x/we.x)*Math.floor(t.y/we.y-1)}function Gn(t){const{defaultHomepage:e=1}=t,{currentScreenLayer:a,register:r,showLayer:u}=E(j),f=w(()=>a().type===N.homepage),[c,p]=x(e),[h,o]=x(0),l=w(()=>{let $=t.config;if(!h())return $;let O=$[e];const P=[];for(let T=0;T<O.items.length;T+=h())P.push({type:ie.normal,items:O.items.slice(T,T+h())});return O.items.length%h()==0&&P.push({type:ie.normal,items:[]}),[$[0],...P,...$.slice(2)]});function i($){return{left:`${($()-c())*100}%`}}function n(){p(e)}function s($){let O="homepage-group-tab";return $()===c()?O+" homepage-group-tab-active":O}function g($){if(!f())return;const{key:O}=$;!O||(O===re.Left&&c()>0?p(P=>P-1):O===re.Right&&c()<l().length-1?p(P=>P+1):O===re.Down&&u({type:N.searchPopover}))}let m={x:0,y:0},I;function K($){!f()||(I=new Date,$.changedTouches?m={x:$.changedTouches[0].screenX,y:$.changedTouches[0].screenY}:m={x:$.screenX,y:$.screenY})}function Y($){if(!f()||new Date-I>500)return;I=null;let P={x:-1,y:-1};$.changedTouches?P={x:$.changedTouches[0].screenX,y:$.changedTouches[0].screenY}:P={x:$.screenX,y:$.screenY};const T=ze(m,P);!T||(T===se.right&&c()>0?p(F=>F-1):T===se.left&&c()<l().length-1?p(F=>F+1):T===se.down&&u({type:N.searchPopover}))}function $e(){const $=rt(_e(document.getElementById("app")));$!==h()&&(o($),p(e))}let le;return J(()=>{r({type:N.homepage,ref:le});const $=document.querySelector(".homepage-group");window.addEventListener("keydown",g),$.addEventListener("touchstart",K),$.addEventListener("touchend",Y),$.addEventListener("mousedown",K),$.addEventListener("mouseup",Y),window.addEventListener("resize",$e),o(rt(_e(document.getElementById("app"))))}),be(()=>{try{const $=document.querySelector(".homepage-group");window.removeEventListener("keydown",g),$.removeEventListener("touchstart",K),$.removeEventListener("touchend",Y),$.removeEventListener("mousedown",K),$.removeEventListener("mouseup",Y),window.removeEventListener("resize",$e)}catch($){console.error($)}}),(()=>{const $=Mn.cloneNode(!0),O=le;return typeof O=="function"?O($):le=$,y($,d(Q,{get each(){return l()},children:(P,T)=>(()=>{const F=Bn.cloneNode(!0);return y(F,d(En,{config:P,get capacity(){return h()},get pageNumber(){return T()},get pageCount(){return l().length},setCurrentHomepage:p,backToHomepage:n})),C(ce=>W(F,i(T),ce)),F})()}),null),y($,d(z,{get when(){return c()>0},get children(){return[(()=>{const P=Tn.cloneNode(!0);return y(P,d(Q,{get each(){return l()},children:(T,F)=>(()=>{const ce=Hn.cloneNode(!0);return C(()=>ce.className=s(F)),ce})()})),C(()=>P.style.setProperty("display",f()?"inline-block":"none")),P})(),d(An,{})]}}),null),$})()}const Un=v('<div class="login-container"><p class="title">Login with Github Token</p></div>');function qn(t){const{setIsSignedIn:e}=t,[a,r]=x("");function u(c){r(c.target.value)}function f(){te.setLocalConfig({token:a(),gistid:""}),e(!0)}return(()=>{const c=Un.cloneNode(!0);return c.firstChild,y(c,d(q,{get children(){return d(L,{s12:!0,get children(){return d(V,{onInput:u,label:"Github Token",value:""})}})}}),null),y(c,d(q,{style:{"text-align":"center"},get children(){return d(ae,{onClick:f,style:{width:"125px"},children:"Login"})}}),null),c})()}const Jn=v('<input class="popover-title">');function Je(t){const e=w(()=>t.name),a=w(()=>t.groupId),{updateMiniGroup:r}=E(R);function u(f){r(a(),{name:f.target.value}),f.target.blur()}return(()=>{const f=Jn.cloneNode(!0);return f.addEventListener("change",u),C(c=>{const p=!!t.disabled,h=e();return p!==c._v$&&(f.disabled=c._v$=p),h!==c._v$2&&(f.value=c._v$2=h),c},{_v$:void 0,_v$2:void 0}),f})()}const Rn=v('<div class="popover-container group-popover-container"><div class="group-popover-tabs"></div><div class="group-popover-wrapper"></div></div>'),jn=v("<span></span>"),Fn=v('<div class="group-popover-page"></div>');function it(t){return Math.floor(t.x/we.x)*Math.floor(t.y/we.y)}function zn(t){let e;const{currentScreenLayer:a,layers:r}=E(j),{getUserHomepageConfig:u,moveEntryOutFromMoniGroup:f,moveEntryIntoMiniGroup:c,reOrderEntries:p}=E(R),h=w(()=>a().type===N.groupPopover),{defaultPage:o=0}=t,[l,i]=x(o),[n,s]=x(0),[g,m]=x(""),[I,K]=x("");x(!1);const Y=w(()=>{let k="";if(a().type===N.groupPopover?k=a().data?.id:r()[N.groupPopover]&&(k=r()[N.groupPopover].data?.id),k!==g()&&(m(k),i(o)),!n())return[];const H=u()[1];let G=[],_=[];if(H){for(let M of H.items)if(M.type===S&&M.id===k){K(M.name),G=M.items;break}}for(let M=0;M<G.length;M+=n())_.push({items:G.slice(M,M+n())});return G.length%n()==0&&_.push({items:[]}),_});function $e(k){return{left:`${(k()-l())*100}%`}}function le(k){if(!h())return;const{key:H}=k;!H||(H===re.Left&&l()>0?i(G=>G-1):H===re.Right&&l()<Y().length-1&&i(G=>G+1))}let $={x:0,y:0},O;function P(k){!h()||(O=new Date,k.changedTouches?$={x:k.changedTouches[0].screenX,y:k.changedTouches[0].screenY}:$={x:k.screenX,y:k.screenY})}function T(k){if(!h()||new Date-O>500)return;O=null;let G={x:-1,y:-1};k.changedTouches?G={x:k.changedTouches[0].screenX,y:k.changedTouches[0].screenY}:G={x:k.screenX,y:k.screenY};const _=ze($,G);if(!!_)if(_===se.right&&l()>0)i(M=>M-1);else if(_===se.left&&l()<Y().length-1)i(M=>M+1);else return}function F(){const k=it(_e(document.querySelector(".group-popover-wrapper")));k!==n()&&(s(k),i(o))}J(()=>{s(it(_e(document.querySelector(".group-popover-wrapper"))));const k=document.querySelector(".group-popover-wrapper");window.addEventListener("keydown",le),k.addEventListener("touchstart",P),k.addEventListener("touchend",T),k.addEventListener("mousedown",P),k.addEventListener("mouseup",T),window.addEventListener("resize",F),b.onDragMove(e),b.onDragEnd(e,(H,G)=>{G.style.transform="scale(1)";const _=b.getData();_&&_.dragging&&(_.dragging.type!==S&&_.dropOn?.type===S?c(_.dragging.id,_.dropOn.id):_.dragging.type!==S&&_.dropOn?p(_.dragging.id,"before",_.dropOn.id,g()):_.dragging.type!==S&&_.dropOn||(_.dropBefore?p(_.dragging.id,"before",_.dropBefore.id,g()):_.dropAfter?p(_.dragging.id,"after",_.dropAfter.id,g()):p(_.dragging.id,"after","last",g())))})}),be(()=>{try{const k=document.querySelector(".group-popover-wrapper");window.removeEventListener("keydown",le),k.removeEventListener("touchstart",P),k.removeEventListener("touchend",T),k.removeEventListener("mousedown",P),k.removeEventListener("mouseup",T),window.removeEventListener("resize",F)}catch(k){console.error(k)}});function ce(k){let H="group-popover-tab";return k()===l()?H+" group-popover-tab-active":H}return(()=>{const k=Rn.cloneNode(!0),H=k.firstChild,G=H.nextSibling,_=e;return typeof _=="function"?_(k):e=k,y(k,d(Je,{get name(){return I()},get groupId(){return g()}}),H),y(H,d(Q,{get each(){return Y()},children:(M,pe)=>(()=>{const Z=jn.cloneNode(!0);return C(()=>Z.className=ce(pe)),Z})()})),y(G,d(Q,{get each(){return Y()},children:(M,pe)=>(()=>{const Z=Fn.cloneNode(!0);return y(Z,d(xe,{style:{display:"blcok",height:"100%",width:"30px",position:"absolute",top:"0",left:"0"},callback:ge=>{pe()!==0&&i(Ce=>Ce-1)}}),null),y(Z,d(Q,{get each(){return M.items},children:ge=>d(qe,{config:ge})}),null),y(Z,d(z,{get when(){return M.items.length<n()},get children(){return d(nt,{get parentId(){return g()}})}}),null),y(Z,d(xe,{style:{display:"blcok",height:"100%",width:"30px",position:"absolute",top:"0",right:"0"},callback:ge=>{pe()!==Y().length-1&&i(Ce=>Ce+1)}}),null),C(ge=>W(Z,$e(pe),ge)),Z})()})),C(()=>H.style.setProperty("display",h()?"inline-block":"none")),k})()}const Kn=v('<div class="popover-container add-entry-popover-container"></div>');function Xn(){const{keywords:t,addEntry:e}=E(R),{backToPrevLayer:a,currentScreenLayer:r}=E(j),u=w(()=>{let i={};return t().forEach(n=>i[n]=null),{data:[],placeholder:"Add keyword",secondaryPlaceholder:"+ keyword",limit:10,autocompleteOptions:{data:i,limit:5,minLength:1}}}),[f,c]=x({id:"",type:X.bookemark,url:"",icon:"",name:"",description:"",keywords:[]}),p=i=>n=>{if(i==="keywords")c(s=>({...s,keywords:[...new Set(n)].map(g=>g.tag)}));else{const s=n.target.value;c(g=>({...g,[i]:s}))}},h=()=>{if(!f().name||!f().url){A.toast({html:"Invalid: name and url are required!",classes:"red"});return}const i={...f(),id:De()};e(i,r().data?.parentId?.()),a()},o=()=>{const i=`JSON.stringify({
      name: document.title?.substring(0, 30) || "",
      description: document.querySelector("meta[name=description]")?.getAttribute("content") || "",
      url: document.location.href
    })`;navigator.clipboard.writeText(i),A.toast({html:"Script has been copied to clipboard!",classes:"green"})},l=()=>{navigator.clipboard.readText().then(i=>{const n=JSON.parse(i);if(n.name===void 0||n.description===void 0||n.url===void 0)throw new Error("invalid data");c(s=>(n.name&&(s.name=n.name),n.description&&(s.description=n.description),n.url&&(s.url=n.url),{...s})),A.toast({html:"Stie Data is successfully imported!",classes:"green"})}).catch(i=>{console.error(i),A.toast({html:"Invalid data format",classes:"red"})})};return(()=>{const i=Kn.cloneNode(!0);return y(i,d(Je,{name:"Add Bookmark",disabled:!0}),null),y(i,d(q,{get children(){return d(L,{s12:!0,get children(){return[d(q,{get children(){return[d(L,{s12:!0,get children(){return[d(ae,{className:"icon-button",icon:"code",onClick:o,title:"copy the helper script onto clipboard"}),d(ae,{className:"icon-button",icon:"input",onClick:l,title:"import json data into the form"})]}}),d(L,{s12:!0,get children(){return d(V,{get onInput(){return p("name")},label:"* Site Name",get value(){return f().name},maxlength:"30",helperText:"Max length: 30; Required"})}}),d(L,{s12:!0,get children(){return d(V,{get onInput(){return p("url")},label:"* URL",get value(){return f().url},maxlength:"2000",helperText:"Max length: 2000; Required"})}}),d(L,{s12:!0,get children(){return d(V,{get onInput(){return p("icon")},label:"Icon URL",get value(){return f().icon},maxlength:"200",helperText:"Max length: 200"})}}),d(L,{s12:!0,get children(){return d(Ze,{get onInput(){return p("description")},label:"Site Description",get value(){return f().description},maxlength:"300",helperText:"Max length: 300"})}}),d(L,{s12:!0,get children(){return d(et,{get options(){return u()},get onChange(){return p("keywords")},label:"Keywords",helperText:"Limit: 10 keywords"})}})]}}),d(q,{className:"submit-button",get children(){return d(ae,{onClick:h,icon:"save",children:"Save Changes"})}})]}})}}),null),i})()}const Yn=v('<div class="popover-container add-entry-popover-container"></div>');function Wn(){const{keywords:t,updateEntry:e}=E(R),{backToPrevLayer:a,currentScreenLayer:r}=E(j),[u,f]=x({id:r().data?.id,type:X.bookemark,url:r().data?.url,icon:r().data?.icon,name:r().data?.name,description:r().data?.description,keywords:r().data?.keywords}),c=w(()=>{let o={};t().forEach(i=>o[i]=null);let l=[];return u()?.keywords&&Array.isArray(u().keywords)&&(l=u().keywords.map(i=>({tag:i}))),{data:l,placeholder:"Add keyword",secondaryPlaceholder:"+ keyword",limit:10,autocompleteOptions:{data:o,limit:5,minLength:1}}});ke(()=>{f({id:r().data?.id,type:X.bookemark,url:r().data?.url,icon:r().data?.icon,name:r().data?.name,description:r().data?.description,keywords:r().data?.keywords})});const p=o=>l=>{if(o==="keywords")f(i=>({...i,keywords:[...new Set(l)].map(n=>n.tag)}));else{const i=l.target.value;f(n=>({...n,[o]:i}))}},h=()=>{if(!u().name||!u().url){A.toast({html:"Invalid: name and url are required!",classes:"red"});return}e(u()),a()};return(()=>{const o=Yn.cloneNode(!0);return y(o,d(Je,{name:"Edit Bookmark",disabled:!0}),null),y(o,d(q,{get children(){return d(L,{s12:!0,get children(){return[d(q,{get children(){return[d(L,{s12:!0,get children(){return d(V,{get onInput(){return p("name")},label:"* Site Name",get value(){return u().name},maxlength:"30",helperText:"Max length: 30; Required"})}}),d(L,{s12:!0,get children(){return d(V,{get onInput(){return p("url")},label:"* URL",get value(){return u().url},maxlength:"2000",helperText:"Max length: 2000; Required"})}}),d(L,{s12:!0,get children(){return d(V,{get onInput(){return p("icon")},label:"Icon URL",get value(){return u().icon},maxlength:"200",helperText:"Max length: 200"})}}),d(L,{s12:!0,get children(){return d(Ze,{get onInput(){return p("description")},label:"Site Description",get value(){return u().description},maxlength:"300",helperText:"Max length: 300"})}}),d(L,{s12:!0,get children(){return d(et,{get options(){return c()},get onChange(){return p("keywords")},label:"Keywords",helperText:"Limit: 10 keywords"})}})]}}),d(q,{className:"submit-button",get children(){return d(ae,{onClick:h,icon:"save",children:"Save Changes"})}})]}})}}),null),o})()}const Qn=v('<div class="search-popover-back-btn"><i class="material-icons">arrow_back</i></div>'),Vn=v('<div class="search-popover-searchbar-container"></div>'),Zn=v('<div class="search-popover-search-result-container"></div>'),er=v('<div><div class="entry-container"></div><div><span class="entry-title search-result-item-title"></span><span class="entry-title search-result-item-keywords"></span></div></div>'),tr=v('<div class="search-result-item-desc"></div>');function ot(t,e){const a=t.name?.toLowerCase()||"",r=t.description?.toLowerCase()||"",u=t.keywords?.join(", ")?.toLowerCase()||"";return`${a}, ${r}, ${u}`.match(e)!==null}const st=["#fcfc36","#acfc36","#36fcf7","#3693fc","#d836fc","#f2858d","#bcf2d8"];let ye={};function Re(t,e){if(!t||!e)return"";let a=new RegExp(e.split(",").filter(c=>c!=="").join("|"),"gi"),r=[],u;for(;u=a.exec(t);)r.push(u);let f=t.split("");return r.forEach(c=>{ye[c[0]]||(ye[c[0]]=st[Object.keys(ye).length%st.length]),f[c.index]=`<span class="highlight" style="background-color: ${ye[c[0]]};">${c[0]}</span>`;for(let p=1;p<c[0].length;p++)f[p+c.index]=void 0}),f.filter(c=>c!==void 0).join("")}function nr(t){let e;const{getUserHomepageConfig:a}=E(R),{currentScreenLayer:r,backToPrevLayer:u}=E(j),f=w(()=>r().type===N.searchPopover),[c,p]=x("");ke(()=>{f()?e.focus():e.blur()});const h=w(()=>{ye={};let o=[];if(c()===""||c().length<2)return o;const l=a()[1].items;let i=new RegExp(c().split(",").filter(n=>n!=="").join("|"));for(let n of l)if(n.type===S)for(let s of n.items)ot(s,i)&&o.push({...s});else ot(n,i)&&o.push({...n});return o.forEach(n=>{const s=Re(n.name?.toLowerCase()||"",c()),g=Re(n.description?.toLowerCase()||"",c()),m=Re(n.keywords?.join(", ")?.toLowerCase()||"",c());n.nameEle=document.createElement("div"),n.nameEle.innerHTML=s,g&&(n.descriptionEle=document.createElement("div"),n.descriptionEle.innerHTML=g),m&&(n.keywordsEle=document.createElement("div"),n.keywordsEle.innerHTML=m)}),o});return[(()=>{const o=Qn.cloneNode(!0);return o.$$click=()=>u(),o})(),(()=>{const o=Vn.cloneNode(!0);return y(o,d(q,{style:{display:"flex",width:"100%","align-items":"center","justify-content":"center",margin:"0"},get children(){return d(L,{s10:!0,m9:!0,l8:!0,xl7:!0,style:{margin:0},get children(){return d(Yt,{ref(l){const i=e;typeof i=="function"?i(l):e=l},get value(){return c()},onInput:l=>{p(l.target.value.replaceAll(" ",""))}})}})}})),o})(),(()=>{const o=Zn.cloneNode(!0);return o.$$click=l=>u(),y(o,d(q,{get children(){return d(L,{s10:!0,m9:!0,l8:!0,xl7:!0,get children(){return d(Q,{get each(){return h()},children:l=>d(q,{className:"search-result-item",onClick:i=>{i.preventDefault(),i.stopPropagation(),window.open(l.url)},get children(){return[(()=>{const i=er.cloneNode(!0),n=i.firstChild,s=n.nextSibling,g=s.firstChild,m=g.nextSibling;return i.style.setProperty("display","flex"),i.style.setProperty("height","55px"),i.style.setProperty("overflow","hidden"),s.style.setProperty("display","flex"),s.style.setProperty("flex-direction","column"),s.style.setProperty("width","calc(100% - 55px)"),s.style.setProperty("padding","0 15px"),y(g,()=>l.nameEle),y(m,()=>l.keywordsEle),C(()=>n.style.setProperty("background-image",l.icon?`url("${l.icon}")`:void 0)),i})(),(()=>{const i=tr.cloneNode(!0);return y(i,()=>l.descriptionEle),i})()]}})})}})}})),o})()]}U(["click"]);const rr=v('<div class="application-container"></div>'),ir=v('<div class="adroid-bottom-op-bar"><div><i class="material-icons">keyboard_arrow_left</i></div><div><i class="material-icons">home</i></div><div><i class="material-icons">tab</i></div></div>');function or(t){const{currentScreenLayer:e,backToPrevLayer:a}=E(j),{applications:r,currentApplication:u}=E(ue);w(()=>e().type===N.applicationPopover);function f(){const c=r()?.[u()]?.application;if(c)return d(c,{})}return[(()=>{const c=rr.cloneNode(!0);return y(c,f),c})(),(()=>{const c=ir.cloneNode(!0),p=c.firstChild,h=p.nextSibling;return p.$$click=()=>a(),h.$$click=()=>a(),c})()]}U(["click"]);const sr=v('<div class="popovers"><div class="popover-bg"></div></div>');function ve(t){let e;const{moveEntryOutFromMoniGroup:a}=E(R),r=w(()=>t.config),{backToPrevLayer:u,register:f}=E(j);function c(o){switch(o){case B.group:return d(zn,{});case B.addEntry:return d(Xn,{});case B.editEntry:return d(Wn,{});case B.search:return d(nr,{});case B.application:return d(or,{});default:return null}}const p={[B.group]:N.groupPopover,[B.addEntry]:N.addBookmarkPopover,[B.editEntry]:N.editBookmarkPopover,[B.search]:N.searchPopover,[B.application]:N.applicationPopover};let h;return J(()=>{f({type:p[r().type],ref:h}),b.onDragMove(e),b.onDragEnd(e,(o,l)=>{const i=b.getData();i&&i.dragging&&(a(i.dragging.id,-1),u())})}),(()=>{const o=sr.cloneNode(!0),l=o.firstChild,i=h;typeof i=="function"?i(o):h=o,Se(l,"click",u,!0);const n=e;return typeof n=="function"?n(l):e=l,y(o,()=>c(r().type),null),o})()}U(["click"]);function ar(){const{getUserHomepageConfig:t,setUserConfig:e,userConfig:a}=E(R),r=w(()=>a()?.homepages?.length>0),[u,f]=x(!1);return ke(()=>{u()&&(A.showLoader(),te.initData().then(c=>{e(c),A.hideLoader()}).catch(c=>{console.error(c),A.toast({html:"Failed to initialize app",classes:"red"}),te.setLocalConfig({token:"",gistid:""}),f(!1),A.hideLoader()}))}),J(()=>{f(!!te.getToken())}),[d(Dn,{isSignedIn:u}),d(z,{get when(){return!u()},get children(){return d(qn,{setIsSignedIn:f})}}),d(z,{get when(){return r()},get children(){return[d(Gn,{get config(){return a().homepages}}),d(ve,{get config(){return{type:B.group}}}),d(ve,{get config(){return{type:B.addEntry}}}),d(ve,{get config(){return{type:B.editEntry}}}),d(ve,{get config(){return{type:B.search}}}),d(ve,{get config(){return{type:B.application}}})]}})]}const lr=v('<div class="app"></div>');function cr(){return(()=>{const t=lr.cloneNode(!0);return y(t,d(ft,{get children(){return d(kt,{get children(){return d(bt,{get children(){return d(ar,{})}})}})}}),null),y(t,d(Vt,{}),null),t})()}at(cr,document.getElementById("app"));

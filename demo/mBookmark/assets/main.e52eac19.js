import{C as ue,c as Se,a as x,b as _,d,t as m,e as J,u as C,f as S,s as O,o as F,i as y,g as Ne,h as Z,S as Y,j as oe,k as we,l as be,F as ee,m as Je,n as me,r as at}from"./vendor.40dbf55d.js";import{Octokit as je}from"https://cdn.skypack.dev/octokit?dts";const lt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))r(p);new MutationObserver(p=>{for(const f of p)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&r(g)}).observe(document,{childList:!0,subtree:!0});function s(p){const f={};return p.integrity&&(f.integrity=p.integrity),p.referrerpolicy&&(f.referrerPolicy=p.referrerpolicy),p.crossorigin==="use-credentials"?f.credentials="include":p.crossorigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function r(p){if(p.ep)return;p.ep=!0;const f=s(p);fetch(p.href,f)}};lt();var se;(function(t){t.Up="ArrowUp",t.Down="ArrowDown",t.Left="ArrowLeft",t.Right="ArrowRight"})(se||(se={}));const ct="Enter";var Q;(function(t){t.bookemark="bookmark",t.application="application"})(Q||(Q={}));var ae;(function(t){t.feed="feed",t.normal="normal",t.widgets="widgets"})(ae||(ae={}));const I="miniEntryGroup";var H;(function(t){t[t.group=0]="group",t[t.addEntry=1]="addEntry",t[t.editEntry=2]="editEntry",t[t.search=3]="search",t[t.application=4]="application"})(H||(H={}));var L;(function(t){t.homepage="homepage",t.groupPopover="groupPopover",t.addBookmarkPopover="addBookmarkPopover",t.editBookmarkPopover="editBookmarkPopover",t.searchPopover="searchPopover",t.applicationPopover="applicationPopover"})(L||(L={}));const _e={x:90,y:110};var ie;(function(t){t.video="video",t.image="image"})(ie||(ie={}));const dt={appearance:{wallpaperUrl:null,wallpaperType:"video"},features:{feedPageUrl:"https://juejin.cn/"}},ut=[{type:"feed"},{type:"normal",items:[{id:"b943abc2-5431-4774-9a99-ed4210fd682f",type:"miniEntryGroup",name:"About Felix",items:[{id:"734d85f5-4adc-4df5-8366-0104440c1302",type:"bookmark",url:"https://github.com/phoenixzqy",icon:"https://github.githubassets.com/favicons/favicon.svg",name:"Github",description:"GitHub is where people build software. More than 73 million people use GitHub to discover, fork, and contribute to over 200 million projects.",keywords:["tech","readings"]},{id:"019d3dc5-83f8-4b96-8c3e-4e0f5687782a",type:"bookmark",url:"https://phoenixzqy.github.io",icon:"",name:"Blog",description:"Felix's blog site, powered by Github page",keywords:["blog","readings"]},{id:"ae85a034-e663-47df-8144-69dd6e65ab03",type:"bookmark",url:"https://www.linkedin.com/in/qiyu-zhao-b02352b6/",icon:"https://static-exp1.licdn.com/sc/h/al2o9zrvru7aqj8e1x2rzsrca",name:"LinkedIn",description:"500 million+ members | Manage your professional identity. Build and engage with your professional network. Access knowledge, insights and opportunities.",keywords:["social"]}]},{id:"pokeclicker",type:"application"}]}];var pt={siteConfig:dt,homepages:ut};const le="mbookmark_gist_database",Le=100;class gt{constructor(){const e=this.getToken();e&&(this.octokit=new je({auth:e}))}getLocalConfig(){let e=window.localStorage.getItem("localConfig");return e||(e=JSON.stringify({token:"",gistid:"",secret:""}),window.localStorage.setItem("localConfig",e)),JSON.parse(e)}initLocalConfig(){this.setLocalConfig({token:"",secret:"",gistid:""})}setLocalConfig(e){window.localStorage.setItem("localConfig",JSON.stringify(e)),e.token&&(this.octokit=new je({auth:e.token}))}clearLocalConfig(){window.localStorage.removeItem("localConfig")}getToken(){return this.getLocalConfig().token}getSecret(){return this.getLocalConfig().secret}async initData(){if(this.getGistId())return this.getData();let e=1,s=Le;for(;s>=Le;){let g=(await this.getGists(e++)).data;s=g.length;for(let l=0;l<g.length;l++)if(Object.keys(g[l].files).includes(le)){let n=(await this.getGist(g[l].id)).data;return this.setLocalConfig({token:this.getToken(),gistid:n.id,secret:this.getSecret()}),JSON.parse(this.decrypt(n.files[le].content))}}const p=(await this.createGist({[le]:{filename:le,content:this.encrypt(JSON.stringify(pt))}},"This is the mBookmark database file")).data;return this.setLocalConfig({token:this.getToken(),gistid:p.id,secret:this.getSecret()}),JSON.parse(this.decrypt(p.files[le].content))}async getData(){let{data:e}=await this.getGist(this.getGistId());return JSON.parse(this.decrypt(e.files[le].content))}async updateData(e){await this.updateGist(this.getGistId(),{[le]:{content:this.encrypt(e)}})}async deleteData(){await this.deleteGist(this.getGistId())}getGistId(){return this.getLocalConfig().gistid}async getGists(e=1){return this.octokit.request("GET /gists",{per_page:Le,page:e})}async getGist(e){return this.octokit.request("GET /gists/{gist_id}",{gist_id:e})}async createGist(e,s,r){return this.octokit.request("POST /gists",{description:s||"",files:e,public:r||!1})}async updateGist(e,s,r){return this.octokit.request("PATCH /gists/{gist_id}",{gist_id:e,description:r,files:s})}async deleteGist(e){return this.octokit.request("DELETE /gists/{gist_id}",{gist_id:e})}encrypt(e){return ue.AES.encrypt(e,this.getSecret()).toString()}decrypt(e){return ue.AES.decrypt(e,this.getSecret()).toString(ue.enc.Utf8)}}const V=new gt;var ce;(function(t){t[t.up=0]="up",t[t.down=1]="down",t[t.left=2]="left",t[t.right=3]="right"})(ce||(ce={}));function Fe(t,e){if(!t||!e||e.x-t.x==0&&e.y-t.y==0)return!1;const s=e.x-t.x,r=e.y-t.y;return Math.abs(s)<50&&Math.abs(r)<50?!1:Math.abs(s)>Math.abs(r)?s>0?3:2:r>0?1:0}function De(){var t=new Date().getTime(),e=typeof performance!="undefined"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var r=Math.random()*16;return t>0?(r=(t+r)%16|0,t=Math.floor(t/16)):(r=(e+r)%16|0,e=Math.floor(e/16)),(s==="x"?r:r&3|8).toString(16)})}function ye(){return De().split("-")[0]}function Ee(t){return{x:t.offsetWidth,y:t.offsetHeight}}function pe(t){var e=t.getBoundingClientRect(),s=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop;return{top:e.top+r,left:e.left+s}}const D=window.M;D.showLoader=()=>{const t=document.querySelector(".global-loader-container");t&&(t.style.display="flex")};D.hideLoader=()=>{const t=document.querySelector(".global-loader-container");t&&(t.style.display="none")};const z=Se();function ft(t){const[e,s]=x({siteConfig:{},homepages:[]}),r=_(()=>{const l=e().homepages[1]?.items||[];let c=[];for(let n in l)if(l[n].type===I)for(let a in l[n].items)c=c.concat(l[n].items[a].keywords||[]);else c=c.concat(l[n].keywords||[]);return c});function p(l,c){let n=l.homepages[1].items;for(let a in n){if(n[a].type===I){for(let o in n[a].items)if(c===n[a].items[o].id){let i=n[a].items.splice(o,1)[0];return n[a].items.length===0&&n.splice(a,1),i}}if(c===n[a].id)return n.splice(a,1)[0]}return!1}async function f(l){D.showLoader(),JSON.parse(JSON.stringify(e()));let c=l(JSON.parse(JSON.stringify(e())));await V.updateData(JSON.stringify(c));let n=await V.getData();n?(D.toast({html:"Successfully saved!",classes:"green"}),s(n)):D.toast({html:"Failed to save!",classes:"red"}),D.hideLoader()}const g={userConfig:e,setUserConfig:s,keywords:r,getUserSiteConfig:_(()=>e().siteConfig),setUserSiteConfig:l=>{f(c=>(c.siteConfig={...l},JSON.parse(JSON.stringify(c))))},getUserHomepageConfig:_(()=>e().homepages),addEntry:(l,c)=>{f(n=>{const a=n.homepages[1].items;if(!c)a.push(l);else for(let o in a)c===a[o].id&&a[o].type===I&&a[o].items.push(l);return JSON.parse(JSON.stringify(n))})},removeEntry:l=>{let c=!1;return f(n=>{p(n,l);let a=n.homepages[1].items;for(let o=a.length-1;o>=0;o--)a[o].type===I&&a[o].items.length===0&&(a.splice(o,1),c=!0);return JSON.parse(JSON.stringify(n))}),c},updateEntry:l=>{const c=l.id;f(n=>{let a=n.homepages[1].items;for(let o in a)if(a[o].type!==I)c===a[o].id&&(a[o]={...a[o],...l});else for(let i in a[o].items)c===a[o].items[i].id&&(a[o].items[i]={...a[o].items[i],...l});return JSON.parse(JSON.stringify(n))})},updateMiniGroup:(l,c)=>{f(n=>{let a=n.homepages[1].items;for(let o in a)a[o].type===I&&l===a[o].id&&(a[o]={...a[o],...c});return JSON.parse(JSON.stringify(n))})},moveEntryIntoMiniGroup:(l,c)=>{f(n=>{let a=p(n,l),o=n.homepages[1].items;for(let i in o)c===o[i].id&&o[i].type===I&&o[i].items.push(a);return JSON.parse(JSON.stringify(n))})},createMiniGroupBy2Entry:(l,c)=>{f(n=>{let a=p(n,l),o=n.homepages[1].items;for(let i in o)if(o[i].id===c&&o[i].type!==I){const u=o[i];o[i]={id:De(),type:I,name:"new group",items:[u,a]};break}return JSON.parse(JSON.stringify(n))})},reOrderEntries:(l,c,n,a)=>{f(o=>{let i=o.homepages[1].items;if(a){e:for(let u in i)if(!(i[u].type!==I||i[u].id!==a)){if(n==="last"){i[u].items.length>1&&i[u].items.push(p(o,l));break}else for(let h in i[u].items)if(i[u].items[h].id===n){i[u].items.splice(c==="before"?h:~~h+1,0,p(o,l));break e}}}else if(n==="last")i.push(p(o,l));else for(let u in i)if(i[u].id===n){i.splice(c==="before"?u:~~u+1,0,p(o,l));break}return JSON.parse(JSON.stringify(o))})},moveEntryOutFromMoniGroup:(l,c)=>{f(n=>{let a=p(n,l);return c>=0?n.homepages[1].items.splice(c,0,a):n.homepages[1].items.push(a),JSON.parse(JSON.stringify(n))})}};return d(z.Provider,{value:g,get children(){return t.children}})}const ht=m('<div class="homepage-app-container"><div class="feed-homepage-back-btn"><i class="material-icons">home</i></div><div class="feed-homepage-container"><div class="feed-homepage-ifram-container"><iframe class="feed-homepage-iframe" title="description"></iframe></div></div></div>');function mt(t){const{getUserSiteConfig:e}=C(z),{backToHomepage:s}=t;return(()=>{const r=ht.cloneNode(!0),p=r.firstChild,f=p.nextSibling,g=f.firstChild,l=g.firstChild;return p.$$click=()=>s(),S(()=>O(l,"src",e().features.feedPageUrl)),r})()}J(["click"]);const yt=m('<div class="font-app-icon fullscreen-app-icon"><i class="material-icons"></i></div>'),vt="fullscreen";function $t(t){const[e,s]=x(!1);return F(()=>{document.addEventListener("fullscreenchange",function(){s(!e())})}),(()=>{const r=yt.cloneNode(!0),p=r.firstChild;return r.$$click=()=>{e()?document.exitFullscreen():document.body.requestFullscreen()},y(p,()=>e()?"fullscreen_exit":"fullscreen"),r})()}J(["click"]);const Te={id:vt,name:"Fullscreen",description:"Enter fullscreen mode",icon:$t},K=Se(),ze={type:L.homepage};function kt(t){const[e,s]=x([]),[r,p]=x(0),[f,g]=x({}),[l,c]=x(ze);function n(u){if(u.show)u.show();else if(u.ref){const h=u.ref;h.classList.remove("screen-layer-hide"),h.classList.add("screen-layer-show")}}function a(u){if(u.hide&&u.hide(),u.ref){const h=u.ref;h.classList.remove("screen-layer-show"),h.classList.add("screen-layer-hide")}}function o(u){return f()[u.type]!==void 0}const i={currentScreenLayer:l,layers:f,register:u=>{f()[u.type]||(u.type!==ze.type?a(u):(s(h=>(h.push(u),h)),c(u)),g(h=>(h[u.type]=u,h)))},showLayer(u){if(!o(u)){console.error(`invalid/unregistered screen type: ${JSON.stringify(u)}`);return}if(l().type===u.type)return;a(l());const h={...f()[u.type],...u};r()===e().length-1?s(v=>(v.push(h),v)):s(v=>(v.length=r()+1,v.push(h),v)),p(r()+1),c(h),g(v=>(v[h.type]=h,v)),n(h)},backToPrevLayer:()=>{r()!==0&&(c(u=>{a(u);const h=e()[r()-1];return n(h),h}),p(r()-1))},goToNextLayer:()=>{r()!==e().length-1&&(c(u=>{a(u);const h=e()[r()+1];return n(h),h}),p(r()+1))}};return d(K.Provider,{value:i,get children(){return t.children}})}const ge=Se();function wt(t){const[e,s]=x({}),[r,p]=x(void 0),{showLayer:f}=C(K),g={applications:e,currentApplication:r,launchApplication:l=>{if(!He[l])throw new Error(`Invalid application id: ${l}`);s(c=>(c[l]={id:l,application:He[l].application},c)),p(l),f({type:L.applicationPopover})},killApplication:l=>{s(c=>(c[l]=void 0,c))}};return d(ge.Provider,{value:g,get children(){return t.children}})}var bt="/demo/mBookmark/assets/Pokeball.08405e7f.svg";const _t=m('<div class="image-app-icon pokeclicker-app-icon"><img></div>'),Ke="pokeclicker";function Et(t){const{launchApplication:e}=C(ge);return(()=>{const s=_t.cloneNode(!0),r=s.firstChild;return s.$$click=()=>{e(Ke)},O(r,"src",bt),s})()}J(["click"]);const xt=m('<div><iframe src="https://g8hh.github.io/pokeclicker/" frameborder="0"></iframe></div>');function Ct(t){return(()=>{const e=xt.cloneNode(!0),s=e.firstChild;return e.style.setProperty("width","100%"),e.style.setProperty("height","100%"),s.style.setProperty("width","100%"),s.style.setProperty("height","100%"),e})()}const Xe={id:Ke,name:"Poke Clicker",description:"pokeclicker game",icon:Et,application:Ct};var Pt="/demo/mBookmark/assets/qrcode.3b9df612.png";const St=m('<div class="image-app-icon qrcode-app-icon"><img></div>'),Ye="qrcodescanner";function Nt(t){const{launchApplication:e}=C(ge);return(()=>{const s=St.cloneNode(!0),r=s.firstChild;return s.$$click=()=>{e(Ye)},O(r,"src",Pt),s})()}J(["click"]);const Lt=m('<div><iframe src="https://phoenixzqy.github.io/demo/QRScanner/index.html" frameborder="0"></iframe></div>');function Dt(t){return(()=>{const e=Lt.cloneNode(!0),s=e.firstChild;return e.style.setProperty("width","100%"),e.style.setProperty("height","100%"),s.style.setProperty("width","100%"),s.style.setProperty("height","100%"),e})()}const Ie={id:Ye,name:"QRCode Scanner",description:"Scan qrcode",icon:Nt,application:Dt},Tt=m('<div class="font-app-icon readme-app-icon"><i class="material-icons">local_library</i></div>'),We="readme";function It(t){const{launchApplication:e}=C(ge);return(()=>{const s=Tt.cloneNode(!0);return s.$$click=()=>{e(We)},s})()}J(["click"]);const Ot=m('<div><iframe src="https://github.com/phoenixzqy/mBookmark#readme" frameborder="0"></iframe></div>');function At(t){return(()=>{const e=Ot.cloneNode(!0),s=e.firstChild;return e.style.setProperty("width","100%"),e.style.setProperty("height","100%"),s.style.setProperty("width","100%"),s.style.setProperty("height","100%"),e})()}const Oe={id:We,name:"ReadMe",description:"mBookmark user instructions",icon:It,application:At};var Mt="/demo/mBookmark/assets/settings.17bb5709.png";const Bt=m('<div class="image-app-icon settings-app-icon"><img></div>'),Qe="settings";function Ht(t){const{launchApplication:e}=C(ge);return(()=>{const s=Bt.cloneNode(!0),r=s.firstChild;return s.$$click=()=>{e(Qe)},O(r,"src",Mt),s})()}J(["click"]);const Gt=m('<i class="material-icons left"></i>'),Ut=m("<a></a>");function te(t){const{disabled:e=!1,className:s="",size:r,onClick:p,style:f={},title:g=""}=t,l=_(()=>{let c="waves-effect waves-light";return e&&(c+=" disabled"),r==="small"?c+=" btn-small":r==="large"?c+=" btn-large":c+=" btn",s&&(c+=` ${s}`),c});return(()=>{const c=Ut.cloneNode(!0);return Ne(c,"click",p,!0),Z(c,f),O(c,"title",g),y(c,d(Y,{get when(){return t.icon},get children(){const n=Gt.cloneNode(!0);return y(n,()=>t.icon),n}}),null),y(c,()=>t.children,null),S(()=>c.className=l()),c})()}J(["click"]);const qt=m("<div></div>");function Rt(t){let e;const{className:s="",style:r={},useContextMenu:p=!1}=t,f=ye(),g=_(()=>t.menuItems||[]),l=n=>{n.preventDefault(),n.stopPropagation(),document.getElementById(f).remove()},c=n=>{n.preventDefault(),n.stopPropagation();let a=document.createElement("div");a.id=f,a.classList.add("mbm-dropdown-container");let o=`<ul class="dropdown-content">
      ${g().map(u=>`<li><a href="#!">${u.label}</a></li>`).join("")}
    </ul>`;a.innerHTML=o,Array.from(a.querySelectorAll("li")).forEach((u,h)=>{typeof g()[h].onClick=="function"&&(u.onclick=v=>{v.preventDefault(),v.stopPropagation(),g()[h].onClick(v),l(v)})});const i=a.querySelector("ul");i.style.left=n.clientX+"px",i.style.top=n.clientY+"px",a.onclick=u=>l(u),a.oncontextmenu=u=>l(u),document.body.appendChild(a)};return F(()=>{p?e.oncontextmenu=n=>c(n):e.onclick=n=>c(n)}),(()=>{const n=qt.cloneNode(!0),a=e;return typeof a=="function"?a(n):e=n,O(n,"data-target",f),Z(n,r),n.className=s,y(n,()=>t.children),n})()}const Ae=m("<label></label>"),Me=m('<span class="helper-text"></span>'),Jt=m('<div><input class="validate"></div>'),jt=m('<div><textarea class="validate"></textarea></div>'),Ft=m('<div><label><i class="material-icons left">search</i></label><input></div>'),zt=m('<div class="input-field"><div class="chips chips-placeholder chips-autocomplete"></div></div>'),Kt=m('<div class="input-field"><select></select><label></label></div>'),Xt=m("<option></option>");function j(t){const e=ye(),{type:s="text",onChange:r,onInput:p,style:f={},className:g="",ref:l,disabled:c=!1,maxlength:n}=t,a={type:s,onChange:r,onInput:p,ref:l,disabled:c,maxlength:n},o=_(()=>t.value);return(()=>{const i=Jt.cloneNode(!0),u=i.firstChild;return i.className=`input-field ${g}`,Z(i,f),O(u,"id",e),oe(u,a,!1,!1),y(i,d(Y,{get when(){return t.label},get children(){const h=Ae.cloneNode(!0);return O(h,"for",e),y(h,()=>t.label),S(()=>h.classList.toggle("active",o())),h}}),null),y(i,d(Y,{get when(){return t.helperText},get children(){const h=Me.cloneNode(!0);return y(h,()=>t.helperText),h}}),null),S(()=>u.value=o()),i})()}function Ve(t){const e=ye(),{type:s="text",onChange:r,onInput:p,style:f={},className:g="",ref:l,rows:c,cols:n,maxlength:a}=t,o={type:s,onChange:r,onInput:p,ref:l,rows:c,cols:n,maxlength:a},i=_(()=>t.value);return(()=>{const u=jt.cloneNode(!0),h=u.firstChild;return u.className=`input-field mbm-textarea ${g}`,Z(u,f),O(h,"id",e),oe(h,o,!1,!1),y(u,d(Y,{get when(){return t.label},get children(){const v=Ae.cloneNode(!0);return O(v,"for",e),y(v,()=>t.label),S(()=>v.classList.toggle("active",i())),v}}),null),y(u,d(Y,{get when(){return t.helperText},get children(){const v=Me.cloneNode(!0);return y(v,()=>t.helperText),v}}),null),S(()=>h.value=i()),u})()}function Yt(t){const{type:e="text",onChange:s,onInput:r,style:p={},className:f="",ref:g}=t,l={type:e,onChange:s,onInput:r,ref:g},c=_(()=>t.value||"");return(()=>{const n=Ft.cloneNode(!0),a=n.firstChild,o=a.nextSibling;return n.className=`mbm-search-bar ${f}`,Z(n,p),oe(o,l,!1,!1),S(()=>o.value=c()),n})()}function Ze(t){const{options:e={},label:s="",helperText:r="",onChange:p=u=>{}}=t,f=ye(),[g,l]=x(!1),[c,n]=x(),a=()=>{l(!0)},o=()=>{l(!1)},i=()=>{const u=D.Chips.getInstance(document.getElementById(f)).chipsData;p(u)};return we(()=>{c()&&D.Chips.init(document.getElementById(f),{...t.options,onChipAdd:i,onChipDelete:i})}),F(()=>{let u=document.getElementById(f);u&&(D.Chips.init(document.getElementById(f),{...e,onChipAdd:i,onChipDelete:i}),n(()=>{const h=u.querySelector("input");return h.addEventListener("focus",a),h.addEventListener("blur",()=>o),h}))}),be(()=>{try{c()&&(c().removeEventListener("focus",a),c().removeEventListener("blur",()=>o))}catch(u){console.error(u)}}),(()=>{const u=zt.cloneNode(!0),h=u.firstChild;return O(h,"id",f),y(u,d(Y,{when:s,get children(){const v=Ae.cloneNode(!0);return O(v,"for",f),v.style.setProperty("top","-25px"),y(v,s),S(()=>v.classList.toggle("keywords-input-label-active",g())),v}}),null),y(u,d(Y,{when:r,get children(){const v=Me.cloneNode(!0);return v.style.setProperty("margin-top","-14px"),y(v,r),v}}),null),u})()}function Wt(t){let e;const{label:s="",options:r=[],onSelected:p}=t,[f,g]=x(void 0);let l=ye();return F(()=>{const c=document.getElementById(l),n=D.FormSelect.init(c);g(n);let a=Array.from(e.querySelectorAll(".select-dropdown li"))||[];const o=e.querySelector("ul").id;a.forEach(i=>i.addEventListener("click",u=>{const h=u.target?.parentElement?.id.replace(o,"");console.log(h),h!==void 0&&typeof p=="function"&&p(r[h].value)})),a.forEach(i=>i.addEventListener("keyup",u=>{if(u.key!==ct)return;const h=u.target?.parentElement?.id.replace(o,"");h!==void 0&&typeof p=="function"&&p(r[h].value)}))}),be(()=>{f().destroy()}),(()=>{const c=Kt.cloneNode(!0),n=c.firstChild,a=n.nextSibling,o=e;return typeof o=="function"?o(c):e=c,O(n,"id",l),y(n,d(ee,{each:r,children:i=>(()=>{const u=Xt.cloneNode(!0);return y(u,()=>i.display),S(h=>{const v=i.value,w=!!i.disabled,N=!!i.selected;return v!==h._v$&&(u.value=h._v$=v),w!==h._v$2&&(u.disabled=h._v$2=w),N!==h._v$3&&(u.selected=h._v$3=N),h},{_v$:void 0,_v$2:void 0,_v$3:void 0}),u})()})),y(a,s),c})()}const et=m("<div></div>"),xe={};for(let t=1;t<=12;t++)for(let e of["s","m","l","xl"])xe[`${e}${t}`]=`${e}${t}`,xe[`offset-${e}${t}`]=`offset-${e}${t}`;function G(t){const{className:e="",style:s={},onClick:r}=t;return(()=>{const p=et.cloneNode(!0);return Ne(p,"click",r,!0),p.className=`row ${e}`,Z(p,s),y(p,()=>t.children),p})()}function P(t){const{style:e={}}=t,s=_(()=>{let r="col";return Object.keys(t).forEach(p=>{xe[p]&&(r+=` ${xe[p]}`)}),t.className&&(r+=` ${t.className}`),r});return(()=>{const r=et.cloneNode(!0);return Z(r,e),y(r,()=>t.children),S(()=>r.className=s()),r})()}J(["click"]);const Qt=m('<div class="global-loader-container"><div class="preloader-wrapper big active"><div class="spinner-layer spinner-blue"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div><div class="spinner-layer spinner-red"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div><div class="spinner-layer spinner-yellow"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div><div class="spinner-layer spinner-green"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div></div></div>');function Vt(t){return(()=>{const e=Qt.cloneNode(!0);return e.style.setProperty("display","none"),e})()}const Zt=m("<h4>Settings</h4>"),en=m("<h5>Account</h5>"),tn=m("<h5>Appearance</h5>"),nn=m("<h5>Feature</h5>"),tt=m('<div class="settings-app-wrapper"></div>'),rn=m("<h4>Reset Secret</h4>"),on=m("<h5>Old Secret</h5>"),sn=m("<h5>New Secret</h5>");function an(t){const[e,s]=x(!1),{getUserSiteConfig:r,setUserSiteConfig:p}=C(z),[f,g]=x(r()),[l,c]=x({old:"",new1:"",new2:""}),n=_(()=>{let w=V.getToken();return w?w.substring(0,5)+"*".repeat(20)+w.substring(w.length-5,w.length):""}),a=w=>N=>{let U;const W=w.split(".");W[1]==="wallpaperType"?U=N:U=N.target.value,g(ne=>(ne[W[0]][W[1]]=U,ne))},o=()=>{p(f())},i=()=>{V.clearLocalConfig(),document.location.reload()},u=w=>N=>{const U=N.target.value;c(W=>(W[w]=U,W))},h=()=>{s(!1)},v=()=>{const w=l();if(!w.old||!w.new1||!w.new2){D.toast({html:"Error: Please fill all fields!",classes:"red"});return}else if(w.new1!==w.new2){D.toast({html:"Error: 2 new secrets are not match, please confirm your inputs!",classes:"red"});return}else if(ue.MD5(w.old).toString()!==V.getSecret()){D.toast({html:"Error: The old secret is incorrect, please retry!",classes:"red"});return}else V.setLocalConfig({...V.getLocalConfig(),secret:ue.MD5(w.new1).toString()}),o(),i()};return[(()=>{const w=tt.cloneNode(!0);return y(w,d(G,{get children(){return[(()=>{const N=Zt.cloneNode(!0);return N.style.setProperty("font-weight","bold"),N})(),d(P,{s12:!0,get children(){return[d(G,{get children(){return[en.cloneNode(!0),d(P,{s10:!0,get children(){return d(j,{disabled:!0,get value(){return n()},label:"Github Token"})}}),d(P,{s2:!0,get children(){return d(te,{onClick:i,icon:"exit_to_app",className:"btn-floating",style:{"background-color":"rgb(234 85 85)",top:"7.5px"}})}}),d(P,{s12:!0,style:{display:"flex","justify-content":"center","margin-bottom":"20px"},get children(){return d(te,{onClick:()=>{s(!0)},icon:"lock",children:"Reset Secret"})}}),tn.cloneNode(!0),d(P,{s12:!0,get children(){return d(Wt,{label:"Wallpaper Type",get onSelected(){return a("appearance.wallpaperType")},get options(){return[{value:ie.image,selected:ie.image===f().appearance.wallpaperType,display:ie.image.toUpperCase()},{value:ie.video,selected:ie.video===f().appearance.wallpaperType,display:ie.video.toUpperCase()}]}})}}),d(P,{s12:!0,get children(){return d(j,{get onChange(){return a("appearance.wallpaperUrl")},label:"Wallpaper Url",get value(){return f().appearance.wallpaperUrl},maxlength:"2000",helperText:"Max length: 2000"})}}),nn.cloneNode(!0),d(P,{s12:!0,get children(){return d(j,{get onChange(){return a("features.feedPageUrl")},label:"Feed Page Url",get value(){return f().features.feedPageUrl},maxlength:"2000",helperText:"Max length: 2000"})}})]}}),d(G,{className:"submit-button",style:{"text-align":"center"},get children(){return d(te,{onClick:o,icon:"save",children:"Save Changes"})}})]}})]}})),S(()=>w.style.setProperty("display",e()?"none":"inherit")),w})(),(()=>{const w=tt.cloneNode(!0);return y(w,d(G,{get children(){return[(()=>{const N=rn.cloneNode(!0);return N.style.setProperty("font-weight","bold"),N})(),d(P,{s12:!0,get children(){return[d(G,{get children(){return[on.cloneNode(!0),d(P,{s12:!0,get children(){return d(j,{get onChange(){return u("old")},label:"* Current Secret",get value(){return l().old},maxlength:"30",helperText:"Max length: 30",type:"password"})}}),sn.cloneNode(!0),d(P,{s12:!0,get children(){return d(j,{get onChange(){return u("new1")},label:"* New Secret",get value(){return l().new1},maxlength:"30",helperText:"Max length: 30",type:"password"})}}),d(P,{s12:!0,get children(){return d(j,{get onChange(){return u("new2")},label:"* Confirm New Secret",get value(){return l().new2},maxlength:"30",helperText:"Max length: 30",type:"password"})}})]}}),d(G,{className:"submit-button",style:{"text-align":"center"},get children(){return[d(te,{onClick:v,icon:"save",children:"Change"}),d(te,{onClick:h,icon:"cancel",style:{"background-color":"#ef5350","margin-left":"15px"},children:"Cancel"})]}})]}})]}})),S(()=>w.style.setProperty("display",e()?"inherit":"none")),w})()]}const Be={id:Qe,name:"Settings",description:"mBookmark Settings",icon:Ht,application:an},He={[Te.id]:Te,[Ie.id]:Ie,[Oe.id]:Oe,[Be.id]:Be,[Xe.id]:Xe},ln={enableOnHold:!0,onHoldTime:200},ve=[-1,-1];class cn{constructor(e){this.draggingElement=void 0,this.isDragging=!1,this.initKeyDownPos=[...ve],this.currentKeyPos=[...ve],this.options={...ln,...e}}findParentDraggableElement(e){if(e.attributes.getNamedItem("is-draggable"))return e;if(!!e.parentElement)return this.findParentDraggableElement(e.parentElement)}findParentHoverableElement(e){if(e.attributes.getNamedItem("is-hoverable"))return e;if(!!e.parentElement)return this.findParentDraggableElement(e.parentElement)}initDragging(e,s){this.initKeyDownPos.toString()===this.currentKeyPos.toString()&&this.currentKeyPos.toString()!==ve.toString()&&(this.draggingElement.style.width=this.draggingElement.offsetWidth+"px",this.draggingElement.style.height=this.draggingElement.offsetHeight+"px",this.draggingElement.style.left=(this.currentKeyPos[0]-this.draggingElement.offsetWidth/2).toString()+"px",this.draggingElement.style.top=(this.currentKeyPos[1]-this.draggingElement.offsetHeight/2).toString()+"px",this.draggingElement.style.transitionDuration="unset",this.draggingElement.style.pointerEvents="none",this.draggingElement.style.zIndex="1",this.draggingElement.style.position="fixed",this.isDragging=!0,s&&this.isDragging&&s(e,this.draggingElement))}mouseDownHandler(e,s){this.draggingElement=this.findParentDraggableElement(e.target),!!this.draggingElement&&(this.initKeyDownPos=[e.clientX,e.clientY],this.currentKeyPos=[e.clientX,e.clientY],this.options.enableOnHold?setTimeout(()=>{this.initDragging(e,s)},300):this.initDragging(e,s))}mouseMoveHandler(e,s){!this.draggingElement||(this.currentKeyPos=[e.clientX,e.clientY],this.isDragging&&(this.draggingElement.style.left=(this.currentKeyPos[0]-this.draggingElement.offsetWidth/2).toString()+"px",this.draggingElement.style.top=(this.currentKeyPos[1]-this.draggingElement.offsetHeight/2).toString()+"px"),s&&s(e,this.draggingElement))}mouseUpHandler(e,s){!this.draggingElement||(this.isDragging=!1,this.initKeyDownPos=[...ve],this.currentKeyPos=[...ve],this.draggingElement.style.transform="scale(1)",this.draggingElement.style.left=void 0,this.draggingElement.style.top=void 0,this.draggingElement.style.pointerEvents="all",s&&s(e,this.draggingElement),this.draggingElement=void 0)}mouseEnterHandler(e,s){if(!this.draggingElement||!this.isDragging)return;const r=this.findParentHoverableElement(e.target);s&&s(e,r,this.draggingElement)}mouseOverHandler(e,s){if(!this.draggingElement||!this.isDragging)return;const r=this.findParentHoverableElement(e.target);s&&s(e,r,this.draggingElement)}mouseLeaveHandler(e,s){if(!this.draggingElement||!this.isDragging)return;const r=this.findParentHoverableElement(e.target);s&&s(e,r,this.draggingElement)}getData(){return this.data}setData(e){this.data=e}clearData(){this.data=void 0}onDragStart(e,s){e.addEventListener("mousedown",r=>{this.mouseDownHandler(r,s)})}onDragMove(e,s){e.addEventListener("mousemove",r=>{this.mouseMoveHandler(r,s)})}onDragEnd(e,s){e.addEventListener("mouseup",r=>{this.mouseUpHandler(r,s),this.clearData()})}onDragEnter(e,s){e.addEventListener("mouseenter",r=>{this.mouseEnterHandler(r,s)})}onDragOver(e,s){e.addEventListener("mouseover",r=>{this.mouseOverHandler(r,s)})}onDragLeave(e,s){e.addEventListener("mouseleave",r=>{this.mouseLeaveHandler(r,s)})}}const b=new cn,dn=m('<span class="entry-title"></span>');function Ge(t){const e=_(()=>t.name);return(()=>{const s=dn.cloneNode(!0);return y(s,e),s})()}const un=m('<div class="entry-wrapper"><div class="entry-container"></div></div>');function pn(t){let e;const{id:s,style:r={},isDraggable:p=!1}=t,f={id:s,style:r},g=_(()=>t.config),l=_(()=>{if(!!g().id)return He[g().id]}),c=l()?.icon,n={"is-draggable":p,"is-hoverable":p,"is-droppable":p};return F(()=>{p&&(b.onDragStart(e,(a,o)=>{o.style.transform="scale(1.2)",b.setData({dragging:g(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0})}),b.onDragOver(e,(a,o,i)=>{if(a.target.classList.contains("entry-container"))o.style.transform="scale(1.1)",b.setData({...b.getData(),dropOn:g(),dropBefore:void 0,dropAfter:void 0});else{o.style.transform="scale(1)";let h={...b.getData(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0};const v=pe(i),w=pe(o);v.left<w.left?h.dropBefore=g():h.dropAfter=g(),b.setData(h)}}),b.onDragLeave(e,(a,o,i)=>{o!==i&&(o.style.transform="scale(1)",b.setData({...b.getData(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0}))}))}),(()=>{const a=un.cloneNode(!0),o=a.firstChild,i=e;return typeof i=="function"?i(a):e=a,oe(a,f,!1,!0),oe(a,n,!1,!0),o.style.setProperty("background-image","none"),y(o,d(c,{})),y(a,d(Ge,{get name(){return l()?.name}}),null),S(u=>{const h=Q.application,v=`${l()?.name}: ${l()?.description||""}`;return h!==u._v$&&O(a,"entry-type",u._v$=h),v!==u._v$2&&O(o,"title",u._v$2=v),u},{_v$:void 0,_v$2:void 0}),a})()}const gn=m('<div class="entry-container"></div>'),fn=m('<div class="entry-wrapper" is-draggable is-hoverable is-droppable></div>');function hn(t){let e;const{showLayer:s,backToPrevLayer:r,currentScreenLayer:p}=C(K),{removeEntry:f}=C(z),g=_(()=>t.config),{id:l,style:c={}}=t,n={id:l,style:c};function a(o){window.open(g().url)}return F(()=>{b.onDragStart(e,(o,i)=>{i.style.transform="scale(1.2)",b.setData({dragging:g(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0})}),b.onDragOver(e,(o,i,u)=>{if(o.target.classList.contains("entry-container"))i.style.transform="scale(1.1)",b.setData({...b.getData(),dropOn:g(),dropBefore:void 0,dropAfter:void 0});else{i.style.transform="scale(1)";let v={...b.getData(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0};const w=pe(u),N=pe(i);w.left<N.left?v.dropBefore=g():v.dropAfter=g(),b.setData(v)}}),b.onDragLeave(e,(o,i,u)=>{i!==u&&(i.style.transform="scale(1)",b.setData({...b.getData(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0}))})}),(()=>{const o=fn.cloneNode(!0),i=e;return typeof i=="function"?i(o):e=o,oe(o,n,!1,!0),y(o,d(Rt,{useContextMenu:!0,options:{autoTrigger:!1,alignment:"left"},menuItems:[{label:"Edit",onClick:()=>{s({type:L.editBookmarkPopover,data:g()})}},{label:"Remove",onClick:()=>{f(g().id)&&p().type===L.groupPopover&&r()}}],style:{height:"55px",width:"55px",position:"relative"},get children(){const u=gn.cloneNode(!0);return u.$$click=a,S(h=>{const v=`${g().name}: ${g().description}`,w=g().icon?`url("${g().icon}")`:void 0;return v!==h._v$&&O(u,"title",h._v$=v),w!==h._v$2&&u.style.setProperty("background-image",h._v$2=w),h},{_v$:void 0,_v$2:void 0}),u}}),null),y(o,d(Ge,{get name(){return g().name}}),null),S(()=>O(o,"entry-type",Q.bookemark)),o})()}J(["click"]);function Ue(t){const e=_(()=>t.config),{style:s={},isDraggable:r=!1}=t,p={style:s,isDraggable:r};function f(g){switch(g){case Q.application:return d(pn,me({get config(){return e()}},p));case Q.bookemark:return d(hn,me({get config(){return e()}},p));default:return null}}return Je(()=>f(e().type))}const mn=m('<div class="mini-entry-group-wrapper" is-draggable is-hoverable is-droppable><div class="mini-entry-group-container"></div></div>'),yn=m('<div class="mini-entry-inner-app"></div>');function vn(t){let e;const{showLayer:s}=C(K),r=_(()=>t.config);function p(){s({type:L.groupPopover,data:r()})}return F(()=>{b.onDragStart(e,(f,g)=>{g.style.transform="scale(1.2)",b.setData({dragging:r(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0})}),b.onDragOver(e,(f,g,l)=>{if(f.target.classList.contains("mini-entry-group-container"))g.style.transform="scale(1.1)",b.setData({...b.getData(),dropOn:r(),dropBefore:void 0,dropAfter:void 0});else{g.style.transform="scale(1)";let n={...b.getData(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0};const a=pe(l),o=pe(g);a.left<o.left?n.dropBefore=r():n.dropAfter=r(),b.setData(n)}}),b.onDragLeave(e,(f,g,l)=>{g.style.transform="scale(1)",b.setData({...b.getData(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0})})}),(()=>{const f=mn.cloneNode(!0),g=f.firstChild,l=e;return typeof l=="function"?l(f):e=f,O(f,"entry-type",I),g.$$click=p,y(g,d(ee,{get each(){return r().items?.slice(0,9)},children:c=>(()=>{const n=yn.cloneNode(!0);return S(()=>n.style.setProperty("background-image",c.icon?`url("${c.icon}")`:void 0)),n})()})),y(f,d(Ge,{get name(){return r().name}}),null),f})()}J(["click"]);const $n=m('<div class="entry-wrapper"><div class="add-entry-button-container" title="Add an app/bookmark"></div></div>');function nt(t){const e=_(()=>t.parentId),{showLayer:s}=C(K);function r(){s({type:L.addBookmarkPopover,data:{parentId:e}})}return(()=>{const p=$n.cloneNode(!0),f=p.firstChild;return f.$$click=r,p})()}J(["click"]);const kn=m("<div></div>");function Ce(t){let e;const{style:s,callback:r,holdDuration:p=500}=t,[f,g]=x(!1);let l,c=[-1,-1];return F(()=>{f()||(g(!0),b.onDragMove(e,(n,a)=>{c=[n.clientX,n.clientY],l&&clearInterval(l),l=setTimeout(()=>{n.clientX,c[0],n.clientY===c[1]&&r(n)},p)}),b.onDragLeave(e,()=>{l&&clearInterval(l)}))}),(()=>{const n=kn.cloneNode(!0),a=e;return typeof a=="function"?a(n):e=n,Z(n,s),n})()}const wn=m('<div class="homepage-app-container"></div>');function bn(t){let e;const{pageNumber:s,pageCount:r,setCurrentHomepage:p}=t,{createMiniGroupBy2Entry:f,moveEntryIntoMiniGroup:g,reOrderEntries:l}=C(z),c=_(()=>t.config),n=_(()=>t.capacity);return F(()=>{b.onDragMove(e),b.onDragEnd(e,(a,o)=>{o.style.transform="scale(1)";const i=b.getData();i&&i.dragging&&(i.dragging.type!==I&&i.dropOn?.type===I?g(i.dragging.id,i.dropOn.id):i.dragging.type!==I&&i.dropOn?f(i.dragging.id,i.dropOn.id):i.dragging.type===I&&i.dropOn?l(i.dragging.id,"before",i.dropOn.id):i.dropBefore?l(i.dragging.id,"before",i.dropBefore.id):i.dropAfter?l(i.dragging.id,"after",i.dropAfter.id):l(i.dragging.id,"after","last"))})}),(()=>{const a=wn.cloneNode(!0),o=e;return typeof o=="function"?o(a):e=a,y(a,d(Ce,{style:{display:"blcok",height:"100%",width:"20px",position:"absolute",top:"0",left:"0"},callback:i=>{s!==1&&p(u=>u-1)}}),null),y(a,d(ee,{get each(){return c().items},children:i=>i.type===I?d(vn,{config:i}):Object.values(Q).includes(i.type)?d(Ue,{config:i,isDraggable:!0}):null}),null),y(a,d(Y,{get when(){return(c()?.items?.length||0)<n()},get children(){return d(nt,{})}}),null),y(a,d(Ce,{style:{display:"blcok",height:"100%",width:"20px",position:"absolute",top:"0",right:"0"},callback:i=>{s!==r-2&&p(u=>u+1)}}),null),a})()}const _n=m('<div class="homepage-app-container"></div>');function En(t){return x(t.config),_n.cloneNode(!0)}const xn=m('<div class="homepage"></div>');function Cn(t){const[e]=x(t.config);function s(r){switch(r){case ae.feed:return d(mt,me({get config(){return e()}},t));case ae.normal:return d(bn,me({get config(){return e()}},t));case ae.widgets:return d(En,me({get config(){return e()}},t))}}return(()=>{const r=xn.cloneNode(!0);return y(r,()=>s(e().type)),r})()}var Pn="/demo/mBookmark/assets/default_wallpaper.0d87bd85.jpg",Sn="/demo/mBookmark/assets/maxresdefault.c097630c.webp",Nn="/demo/mBookmark/assets/default_live_wallpaper.a9a734d8.webm";const Ln=m('<div class="homepage-background"></div>'),Dn=m("<div></div>"),Tn=m('<video id="background-video" autoplay loop muted><source type="video/webm"></video>');function In(t){const{isSignedIn:e}=t,{currentScreenLayer:s}=C(K),{getUserSiteConfig:r}=C(z),p=_(()=>s().type===L.homepage&&e());return(()=>{const f=Ln.cloneNode(!0);return y(f,(()=>{const g=Je(()=>r()?.appearance?.wallpaperType===ie.image,!0);return()=>g()?(()=>{const l=Dn.cloneNode(!0);return l.style.setProperty("background-size","cover"),l.style.setProperty("height","100%"),l.style.setProperty("width","100%"),S(c=>{const n=`url("${r()?.appearance?.wallpaperUrl?r()?.appearance?.wallpaperUrl:Pn}"`,a=p()?"background-show":"background-hide";return n!==c._v$&&l.style.setProperty("background-image",c._v$=n),a!==c._v$2&&(l.className=c._v$2=a),c},{_v$:void 0,_v$2:void 0}),l})():(()=>{const l=Tn.cloneNode(!0),c=l.firstChild;return S(n=>{const a=r()?.appearance?.wallpaperUrl?r()?.appearance?.wallpaperUrl:Sn,o=p()?"background-show":"background-hide",i=r()?.appearance?.wallpaperUrl?r()?.appearance?.wallpaperUrl:Nn;return a!==n._v$3&&O(l,"poster",n._v$3=a),o!==n._v$4&&(l.className=n._v$4=o),i!==n._v$5&&O(c,"src",n._v$5=i),n},{_v$3:void 0,_v$4:void 0,_v$5:void 0}),l})()})()),f})()}const On=m('<div class="dock-container"><div class="dock-background"></div></div>'),An=[Te.id,Oe.id,Ie.id,Be.id];function Mn(t){const{style:e={}}=t,s={style:e};return(()=>{const r=On.cloneNode(!0);return r.firstChild,oe(r,s,!1,!0),y(r,d(ee,{each:An,children:p=>d(Ue,{get config(){return{id:p,type:Q.application}}})}),null),r})()}const Bn=m('<div class="homepage-group-tabs"></div>'),Hn=m('<div class="homepage-group"></div>'),Gn=m('<div class="homepage-group-item"></div>'),Un=m("<span></span>");function rt(t){return Math.floor(t.x/_e.x)*Math.floor(t.y/_e.y-1)}function qn(t){const{defaultHomepage:e=1}=t,{currentScreenLayer:s,register:r,showLayer:p}=C(K),f=_(()=>s().type===L.homepage),[g,l]=x(e),[c,n]=x(0),a=_(()=>{let $=t.config;if(!c())return $;let A=$[e];const T=[];for(let M=0;M<A.items.length;M+=c())T.push({type:ae.normal,items:A.items.slice(M,M+c())});return A.items.length%c()==0&&T.push({type:ae.normal,items:[]}),[$[0],...T,...$.slice(2)]});function o($){return{left:`${($()-g())*100}%`}}function i(){l(e)}function u($){let A="homepage-group-tab";return $()===g()?A+" homepage-group-tab-active":A}function h($){if(!f())return;const{key:A}=$;!A||(A===se.Left&&g()>0?l(T=>T-1):A===se.Right&&g()<a().length-1?l(T=>T+1):A===se.Down&&p({type:L.searchPopover}))}let v={x:0,y:0},w;function N($){!f()||(w=new Date,$.changedTouches?v={x:$.changedTouches[0].screenX,y:$.changedTouches[0].screenY}:v={x:$.screenX,y:$.screenY})}function U($){if(!f()||new Date-w>500)return;w=null;let T={x:-1,y:-1};$.changedTouches?T={x:$.changedTouches[0].screenX,y:$.changedTouches[0].screenY}:T={x:$.screenX,y:$.screenY};const M=Fe(v,T);!M||(M===ce.right&&g()>0?l(X=>X-1):M===ce.left&&g()<a().length-1?l(X=>X+1):M===ce.down&&p({type:L.searchPopover}))}function W(){const $=rt(Ee(document.getElementById("app")));$!==c()&&(n($),l(e))}let ne;return F(()=>{r({type:L.homepage,ref:ne});const $=document.querySelector(".homepage-group");window.addEventListener("keydown",h),$.addEventListener("touchstart",N),$.addEventListener("touchend",U),$.addEventListener("mousedown",N),$.addEventListener("mouseup",U),window.addEventListener("resize",W),n(rt(Ee(document.getElementById("app"))))}),be(()=>{try{const $=document.querySelector(".homepage-group");window.removeEventListener("keydown",h),$.removeEventListener("touchstart",N),$.removeEventListener("touchend",U),$.removeEventListener("mousedown",N),$.removeEventListener("mouseup",U),window.removeEventListener("resize",W)}catch($){console.error($)}}),(()=>{const $=Hn.cloneNode(!0),A=ne;return typeof A=="function"?A($):ne=$,y($,d(ee,{get each(){return a()},children:(T,M)=>(()=>{const X=Gn.cloneNode(!0);return y(X,d(Cn,{config:T,get capacity(){return c()},get pageNumber(){return M()},get pageCount(){return a().length},setCurrentHomepage:l,backToHomepage:i})),S(de=>Z(X,o(M),de)),X})()}),null),y($,d(Y,{get when(){return g()>0},get children(){return[(()=>{const T=Bn.cloneNode(!0);return y(T,d(ee,{get each(){return a()},children:(M,X)=>(()=>{const de=Un.cloneNode(!0);return S(()=>de.className=u(X)),de})()})),S(()=>T.style.setProperty("display",f()?"inline-block":"none")),T})(),d(Mn,{})]}}),null),$})()}const Rn=m('<div class="login-container"><p class="title">Login with Github Token</p></div>');function Jn(t){const{setIsSignedIn:e}=t,[s,r]=x(""),[p,f]=x(""),g=c=>n=>{switch(c){case"token":r(n.target.value);break;case"secret":f(n.target.value);break}};function l(){if(s()===""||p()===""){D.toast({html:"Error: Both token and secret are required!",classes:"red"});return}V.setLocalConfig({token:s(),gistid:"",secret:ue.MD5(p()).toString()}),e(!0)}return(()=>{const c=Rn.cloneNode(!0);return c.firstChild,y(c,d(G,{get children(){return d(P,{s12:!0,get children(){return[d(j,{get onInput(){return g("token")},label:"* Github Token",value:""}),d(j,{type:"password",get onInput(){return g("secret")},label:"* Encrypt Secret",value:""})]}})}}),null),y(c,d(G,{style:{"text-align":"center"},get children(){return d(te,{onClick:l,style:{width:"125px"},children:"Login"})}}),null),c})()}const jn=m('<input class="popover-title">');function qe(t){const e=_(()=>t.name),s=_(()=>t.groupId),{updateMiniGroup:r}=C(z);function p(f){r(s(),{name:f.target.value}),f.target.blur()}return(()=>{const f=jn.cloneNode(!0);return f.addEventListener("change",p),S(g=>{const l=!!t.disabled,c=e();return l!==g._v$&&(f.disabled=g._v$=l),c!==g._v$2&&(f.value=g._v$2=c),g},{_v$:void 0,_v$2:void 0}),f})()}const Fn=m('<div class="popover-container group-popover-container"><div class="group-popover-tabs"></div><div class="group-popover-wrapper"></div></div>'),zn=m("<span></span>"),Kn=m('<div class="group-popover-page"></div>');function it(t){return Math.floor(t.x/_e.x)*Math.floor(t.y/_e.y)}function Xn(t){let e;const{currentScreenLayer:s,layers:r}=C(K),{getUserHomepageConfig:p,moveEntryOutFromMoniGroup:f,moveEntryIntoMiniGroup:g,reOrderEntries:l}=C(z),c=_(()=>s().type===L.groupPopover),{defaultPage:n=0}=t,[a,o]=x(n),[i,u]=x(0),[h,v]=x(""),[w,N]=x("");x(!1);const U=_(()=>{let k="";if(s().type===L.groupPopover?k=s().data?.id:r()[L.groupPopover]&&(k=r()[L.groupPopover].data?.id),k!==h()&&(v(k),o(n)),!i())return[];const q=p()[1];let R=[],E=[];if(q){for(let B of q.items)if(B.type===I&&B.id===k){N(B.name),R=B.items;break}}for(let B=0;B<R.length;B+=i())E.push({items:R.slice(B,B+i())});return R.length%i()==0&&E.push({items:[]}),E});function W(k){return{left:`${(k()-a())*100}%`}}function ne(k){if(!c())return;const{key:q}=k;!q||(q===se.Left&&a()>0?o(R=>R-1):q===se.Right&&a()<U().length-1&&o(R=>R+1))}let $={x:0,y:0},A;function T(k){!c()||(A=new Date,k.changedTouches?$={x:k.changedTouches[0].screenX,y:k.changedTouches[0].screenY}:$={x:k.screenX,y:k.screenY})}function M(k){if(!c()||new Date-A>500)return;A=null;let R={x:-1,y:-1};k.changedTouches?R={x:k.changedTouches[0].screenX,y:k.changedTouches[0].screenY}:R={x:k.screenX,y:k.screenY};const E=Fe($,R);if(!!E)if(E===ce.right&&a()>0)o(B=>B-1);else if(E===ce.left&&a()<U().length-1)o(B=>B+1);else return}function X(){const k=it(Ee(document.querySelector(".group-popover-wrapper")));k!==i()&&(u(k),o(n))}F(()=>{u(it(Ee(document.querySelector(".group-popover-wrapper"))));const k=document.querySelector(".group-popover-wrapper");window.addEventListener("keydown",ne),k.addEventListener("touchstart",T),k.addEventListener("touchend",M),k.addEventListener("mousedown",T),k.addEventListener("mouseup",M),window.addEventListener("resize",X),b.onDragMove(e),b.onDragEnd(e,(q,R)=>{R.style.transform="scale(1)";const E=b.getData();E&&E.dragging&&(E.dragging.type!==I&&E.dropOn?.type===I?g(E.dragging.id,E.dropOn.id):E.dragging.type!==I&&E.dropOn?l(E.dragging.id,"before",E.dropOn.id,h()):E.dragging.type!==I&&E.dropOn||(E.dropBefore?l(E.dragging.id,"before",E.dropBefore.id,h()):E.dropAfter?l(E.dragging.id,"after",E.dropAfter.id,h()):l(E.dragging.id,"after","last",h())))})}),be(()=>{try{const k=document.querySelector(".group-popover-wrapper");window.removeEventListener("keydown",ne),k.removeEventListener("touchstart",T),k.removeEventListener("touchend",M),k.removeEventListener("mousedown",T),k.removeEventListener("mouseup",M),window.removeEventListener("resize",X)}catch(k){console.error(k)}});function de(k){let q="group-popover-tab";return k()===a()?q+" group-popover-tab-active":q}return(()=>{const k=Fn.cloneNode(!0),q=k.firstChild,R=q.nextSibling,E=e;return typeof E=="function"?E(k):e=k,y(k,d(qe,{get name(){return w()},get groupId(){return h()}}),q),y(q,d(ee,{get each(){return U()},children:(B,fe)=>(()=>{const re=zn.cloneNode(!0);return S(()=>re.className=de(fe)),re})()})),y(R,d(ee,{get each(){return U()},children:(B,fe)=>(()=>{const re=Kn.cloneNode(!0);return y(re,d(Ce,{style:{display:"blcok",height:"100%",width:"30px",position:"absolute",top:"0",left:"0"},callback:he=>{fe()!==0&&o(Pe=>Pe-1)}}),null),y(re,d(ee,{get each(){return B.items},children:he=>d(Ue,{config:he})}),null),y(re,d(Y,{get when(){return B.items.length<i()},get children(){return d(nt,{get parentId(){return h()}})}}),null),y(re,d(Ce,{style:{display:"blcok",height:"100%",width:"30px",position:"absolute",top:"0",right:"0"},callback:he=>{fe()!==U().length-1&&o(Pe=>Pe+1)}}),null),S(he=>Z(re,W(fe),he)),re})()})),S(()=>q.style.setProperty("display",c()?"inline-block":"none")),k})()}const Yn=m('<div class="popover-container add-entry-popover-container"></div>');function Wn(){const{keywords:t,addEntry:e}=C(z),{backToPrevLayer:s,currentScreenLayer:r}=C(K),p=_(()=>{let o={};return t().forEach(i=>o[i]=null),{data:[],placeholder:"Add keyword",secondaryPlaceholder:"+ keyword",limit:10,autocompleteOptions:{data:o,limit:5,minLength:1}}}),[f,g]=x({id:"",type:Q.bookemark,url:"",icon:"",name:"",description:"",keywords:[]}),l=o=>i=>{if(o==="keywords")g(u=>({...u,keywords:[...new Set(i)].map(h=>h.tag)}));else{const u=i.target.value;g(h=>({...h,[o]:u}))}},c=()=>{if(!f().name||!f().url){D.toast({html:"Invalid: name and url are required!",classes:"red"});return}const o={...f(),id:De()};e(o,r().data?.parentId?.()),s()},n=()=>{const o=`JSON.stringify({
      name: document.title?.substring(0, 30) || "",
      description: document.querySelector("meta[name=description]")?.getAttribute("content") || "",
      url: document.location.href
    })`;navigator.clipboard.writeText(o),D.toast({html:"Script has been copied to clipboard!",classes:"green"})},a=()=>{navigator.clipboard.readText().then(o=>{const i=JSON.parse(o);if(i.name===void 0||i.description===void 0||i.url===void 0)throw new Error("invalid data");g(u=>(i.name&&(u.name=i.name),i.description&&(u.description=i.description),i.url&&(u.url=i.url),{...u})),D.toast({html:"Stie Data is successfully imported!",classes:"green"})}).catch(o=>{console.error(o),D.toast({html:"Invalid data format",classes:"red"})})};return(()=>{const o=Yn.cloneNode(!0);return y(o,d(qe,{name:"Add Bookmark",disabled:!0}),null),y(o,d(G,{get children(){return d(P,{s12:!0,get children(){return[d(G,{get children(){return[d(P,{s12:!0,get children(){return[d(te,{className:"icon-button",icon:"code",onClick:n,title:"copy the helper script onto clipboard"}),d(te,{className:"icon-button",icon:"input",onClick:a,title:"import json data into the form"})]}}),d(P,{s12:!0,get children(){return d(j,{get onInput(){return l("name")},label:"* Site Name",get value(){return f().name},maxlength:"30",helperText:"Max length: 30; Required"})}}),d(P,{s12:!0,get children(){return d(j,{get onInput(){return l("url")},label:"* URL",get value(){return f().url},maxlength:"2000",helperText:"Max length: 2000; Required"})}}),d(P,{s12:!0,get children(){return d(j,{get onInput(){return l("icon")},label:"Icon URL",get value(){return f().icon},maxlength:"200",helperText:"Max length: 200"})}}),d(P,{s12:!0,get children(){return d(Ve,{get onInput(){return l("description")},label:"Site Description",get value(){return f().description},maxlength:"300",helperText:"Max length: 300"})}}),d(P,{s12:!0,get children(){return d(Ze,{get options(){return p()},get onChange(){return l("keywords")},label:"Keywords",helperText:"Limit: 10 keywords"})}})]}}),d(G,{className:"submit-button",get children(){return d(te,{onClick:c,icon:"save",children:"Save Changes"})}})]}})}}),null),o})()}const Qn=m('<div class="popover-container add-entry-popover-container"></div>');function Vn(){const{keywords:t,updateEntry:e}=C(z),{backToPrevLayer:s,currentScreenLayer:r}=C(K),[p,f]=x({id:r().data?.id,type:Q.bookemark,url:r().data?.url,icon:r().data?.icon,name:r().data?.name,description:r().data?.description,keywords:r().data?.keywords}),g=_(()=>{let n={};t().forEach(o=>n[o]=null);let a=[];return p()?.keywords&&Array.isArray(p().keywords)&&(a=p().keywords.map(o=>({tag:o}))),{data:a,placeholder:"Add keyword",secondaryPlaceholder:"+ keyword",limit:10,autocompleteOptions:{data:n,limit:5,minLength:1}}});we(()=>{f({id:r().data?.id,type:Q.bookemark,url:r().data?.url,icon:r().data?.icon,name:r().data?.name,description:r().data?.description,keywords:r().data?.keywords})});const l=n=>a=>{if(n==="keywords")f(o=>({...o,keywords:[...new Set(a)].map(i=>i.tag)}));else{const o=a.target.value;f(i=>({...i,[n]:o}))}},c=()=>{if(!p().name||!p().url){D.toast({html:"Invalid: name and url are required!",classes:"red"});return}e(p()),s()};return(()=>{const n=Qn.cloneNode(!0);return y(n,d(qe,{name:"Edit Bookmark",disabled:!0}),null),y(n,d(G,{get children(){return d(P,{s12:!0,get children(){return[d(G,{get children(){return[d(P,{s12:!0,get children(){return d(j,{get onInput(){return l("name")},label:"* Site Name",get value(){return p().name},maxlength:"30",helperText:"Max length: 30; Required"})}}),d(P,{s12:!0,get children(){return d(j,{get onInput(){return l("url")},label:"* URL",get value(){return p().url},maxlength:"2000",helperText:"Max length: 2000; Required"})}}),d(P,{s12:!0,get children(){return d(j,{get onInput(){return l("icon")},label:"Icon URL",get value(){return p().icon},maxlength:"200",helperText:"Max length: 200"})}}),d(P,{s12:!0,get children(){return d(Ve,{get onInput(){return l("description")},label:"Site Description",get value(){return p().description},maxlength:"300",helperText:"Max length: 300"})}}),d(P,{s12:!0,get children(){return d(Ze,{get options(){return g()},get onChange(){return l("keywords")},label:"Keywords",helperText:"Limit: 10 keywords"})}})]}}),d(G,{className:"submit-button",get children(){return d(te,{onClick:c,icon:"save",children:"Save Changes"})}})]}})}}),null),n})()}const Zn=m('<div class="search-popover-back-btn"><i class="material-icons">arrow_back</i></div>'),er=m('<div class="search-popover-searchbar-container"></div>'),tr=m('<div class="search-popover-search-result-container"></div>'),nr=m('<div><div class="entry-container"></div><div><span class="entry-title search-result-item-title"></span><span class="entry-title search-result-item-keywords"></span></div></div>'),rr=m('<div class="search-result-item-desc"></div>');function ot(t,e){const s=t.name?.toLowerCase()||"",r=t.description?.toLowerCase()||"",p=t.keywords?.join(", ")?.toLowerCase()||"";return`${s}, ${r}, ${p}`.match(e)!==null}const st=["#fcfc36","#acfc36","#36fcf7","#3693fc","#d836fc","#f2858d","#bcf2d8"];let $e={};function Re(t,e){if(!t||!e)return{highlightedStr:"",matchedPhraseCount:0,matchedTotalCount:0};let s=new RegExp(e.split(",").filter(n=>n!=="").join("|"),"gi"),r=[],p,f=0,g=[],l=0;for(;p=s.exec(t);)g.includes(p[0])||g.push(p[0]),r.push(p),l++;f=g.length;let c=t.split("");return r.forEach(n=>{$e[n[0]]||($e[n[0]]=st[Object.keys($e).length%st.length]),c[n.index]=`<span class="highlight" style="background-color: ${$e[n[0]]};">${n[0]}</span>`;for(let a=1;a<n[0].length;a++)c[a+n.index]=void 0}),{highlightedStr:c.filter(n=>n!==void 0).join(""),matchedPhraseCount:f,matchedTotalCount:l}}function ir(t){let e;const{getUserHomepageConfig:s}=C(z),{currentScreenLayer:r,backToPrevLayer:p}=C(K),f=_(()=>r().type===L.searchPopover),[g,l]=x("");we(()=>{f()?e.focus():e.blur()});const c=_(()=>{$e={};let n=[];if(g()===""||g().length<2)return n;const a=s()[1].items;let o=new RegExp(g().split(",").filter(i=>i!=="").join("|"));for(let i of a)if(i.type===I)for(let u of i.items)ot(u,o)&&n.push({...u});else ot(i,o)&&n.push({...i});return n.forEach(i=>{const u=Re(i.name||"",g()),h=Re(i.description||"",g()),v=Re(i.keywords?.join(", ")||"",g());i.matchedPhraseCount=Math.max(u.matchedPhraseCount,h.matchedPhraseCount,v.matchedPhraseCount),i.matchedTotalCount=Math.max(u.matchedTotalCount,h.matchedTotalCount,v.matchedTotalCount),i.nameEle=document.createElement("div"),i.nameEle.innerHTML=u.highlightedStr,h&&(i.descriptionEle=document.createElement("div"),i.descriptionEle.innerHTML=h.highlightedStr),v&&(i.keywordsEle=document.createElement("div"),i.keywordsEle.innerHTML=v.highlightedStr.split(", ").sort((w,N)=>w.indexOf('<span class="highlight"')>=0?-1:N.indexOf('<span class="highlight"')>=0?1:0).join(", "))}),n.sort((i,u)=>i.matchedPhraseCount>u.matchedPhraseCount?-1:i.matchedPhraseCount<u.matchedPhraseCount?1:i.matchedTotalCount>u.matchedTotalCount?-1:i.matchedTotalCount<u.matchedTotalCount?1:0)});return[(()=>{const n=Zn.cloneNode(!0);return n.$$click=()=>p(),n})(),(()=>{const n=er.cloneNode(!0);return y(n,d(G,{style:{display:"flex",width:"100%","align-items":"center","justify-content":"center",margin:"0"},get children(){return d(P,{s10:!0,m9:!0,l8:!0,xl7:!0,style:{margin:0},get children(){return d(Yt,{ref(a){const o=e;typeof o=="function"?o(a):e=a},get value(){return g()},onInput:a=>{l(a.target.value.replaceAll(" ",""))}})}})}})),n})(),(()=>{const n=tr.cloneNode(!0);return n.$$click=a=>p(),y(n,d(G,{get children(){return d(P,{s10:!0,m9:!0,l8:!0,xl7:!0,get children(){return d(ee,{get each(){return c()},children:a=>d(G,{className:"search-result-item",onClick:o=>{o.preventDefault(),o.stopPropagation(),window.open(a.url)},get children(){return[(()=>{const o=nr.cloneNode(!0),i=o.firstChild,u=i.nextSibling,h=u.firstChild,v=h.nextSibling;return o.style.setProperty("display","flex"),o.style.setProperty("height","55px"),o.style.setProperty("overflow","hidden"),u.style.setProperty("display","flex"),u.style.setProperty("flex-direction","column"),u.style.setProperty("width","calc(100% - 55px)"),u.style.setProperty("padding","0 15px"),y(h,()=>a.nameEle),y(v,()=>a.keywordsEle),S(()=>i.style.setProperty("background-image",a.icon?`url("${a.icon}")`:void 0)),o})(),(()=>{const o=rr.cloneNode(!0);return y(o,()=>a.descriptionEle),o})()]}})})}})}})),n})()]}J(["click"]);const or=m('<div class="application-container"></div>'),sr=m('<div class="adroid-bottom-op-bar"><div><i class="material-icons">keyboard_arrow_left</i></div><div><i class="material-icons">home</i></div><div><i class="material-icons">tab</i></div></div>');function ar(t){const{currentScreenLayer:e,backToPrevLayer:s}=C(K),{applications:r,currentApplication:p}=C(ge);_(()=>e().type===L.applicationPopover);function f(){const g=r()?.[p()]?.application;if(g)return d(g,{})}return[(()=>{const g=or.cloneNode(!0);return y(g,f),g})(),(()=>{const g=sr.cloneNode(!0),l=g.firstChild,c=l.nextSibling;return l.$$click=()=>s(),c.$$click=()=>s(),g})()]}J(["click"]);const lr=m('<div class="popovers"><div class="popover-bg"></div></div>');function ke(t){let e;const{moveEntryOutFromMoniGroup:s}=C(z),r=_(()=>t.config),{backToPrevLayer:p,register:f}=C(K);function g(n){switch(n){case H.group:return d(Xn,{});case H.addEntry:return d(Wn,{});case H.editEntry:return d(Vn,{});case H.search:return d(ir,{});case H.application:return d(ar,{});default:return null}}const l={[H.group]:L.groupPopover,[H.addEntry]:L.addBookmarkPopover,[H.editEntry]:L.editBookmarkPopover,[H.search]:L.searchPopover,[H.application]:L.applicationPopover};let c;return F(()=>{f({type:l[r().type],ref:c}),b.onDragMove(e),b.onDragEnd(e,(n,a)=>{const o=b.getData();o&&o.dragging&&(s(o.dragging.id,-1),p())})}),(()=>{const n=lr.cloneNode(!0),a=n.firstChild,o=c;typeof o=="function"?o(n):c=n,Ne(a,"click",p,!0);const i=e;return typeof i=="function"?i(a):e=a,y(n,()=>g(r().type),null),n})()}J(["click"]);function cr(){const{getUserHomepageConfig:t,setUserConfig:e,userConfig:s}=C(z),r=_(()=>s()?.homepages?.length>0),[p,f]=x(!1);return we(()=>{p()&&(D.showLoader(),V.initData().then(g=>{e(g),D.hideLoader()}).catch(g=>{console.error(g),D.toast({html:"Failed to initialize app",classes:"red"}),V.initLocalConfig(),f(!1),D.hideLoader()}))}),F(()=>{f(!!V.getToken())}),[d(In,{isSignedIn:p}),d(Y,{get when(){return!p()},get children(){return d(Jn,{setIsSignedIn:f})}}),d(Y,{get when(){return r()},get children(){return[d(qn,{get config(){return s().homepages}}),d(ke,{get config(){return{type:H.group}}}),d(ke,{get config(){return{type:H.addEntry}}}),d(ke,{get config(){return{type:H.editEntry}}}),d(ke,{get config(){return{type:H.search}}}),d(ke,{get config(){return{type:H.application}}})]}})]}const dr=m('<div class="app"></div>');function ur(){return(()=>{const t=dr.cloneNode(!0);return y(t,d(ft,{get children(){return d(kt,{get children(){return d(wt,{get children(){return d(cr,{})}})}})}}),null),y(t,d(Vt,{}),null),t})()}at(ur,document.getElementById("app"));

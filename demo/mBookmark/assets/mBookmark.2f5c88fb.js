import{C as Pe,c as Le,a as x,b as w,d as u,t as v,e as q,u as E,f as C,s as O,o as R,i as y,g as Ne,h as W,S as F,j as ne,k as ke,l as be,F as Q,m as ze,n as ge}from"./vendor.40dbf55d.js";import{Octokit as je}from"https://cdn.skypack.dev/octokit?dts";const at=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))n(p);new MutationObserver(p=>{for(const f of p)if(f.type==="childList")for(const c of f.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function a(p){const f={};return p.integrity&&(f.integrity=p.integrity),p.referrerpolicy&&(f.referrerPolicy=p.referrerpolicy),p.crossorigin==="use-credentials"?f.credentials="include":p.crossorigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function n(p){if(p.ep)return;p.ep=!0;const f=a(p);fetch(p.href,f)}};at();var re;(function(t){t.Up="ArrowUp",t.Down="ArrowDown",t.Left="ArrowLeft",t.Right="ArrowRight"})(re||(re={}));const lt="Enter";var X;(function(t){t.bookemark="bookmark",t.application="application"})(X||(X={}));var ie;(function(t){t.feed="feed",t.normal="normal",t.widgets="widgets"})(ie||(ie={}));const N="miniEntryGroup";var M;(function(t){t[t.group=0]="group",t[t.addEntry=1]="addEntry",t[t.editEntry=2]="editEntry",t[t.search=3]="search",t[t.application=4]="application"})(M||(M={}));var P;(function(t){t.homepage="homepage",t.groupPopover="groupPopover",t.addBookmarkPopover="addBookmarkPopover",t.editBookmarkPopover="editBookmarkPopover",t.searchPopover="searchPopover",t.applicationPopover="applicationPopover"})(P||(P={}));const we={x:90,y:110};var ee;(function(t){t.video="video",t.image="image"})(ee||(ee={}));const ct={appearance:{wallpaperUrl:null,wallpaperType:"video"},features:{feedPageUrl:"https://juejin.cn/"}},dt=[{type:"feed"},{type:"normal",items:[{id:"b943abc2-5431-4774-9a99-ed4210fd682f",type:"miniEntryGroup",name:"About Felix",items:[{id:"734d85f5-4adc-4df5-8366-0104440c1302",type:"bookmark",url:"https://github.com/phoenixzqy",icon:"https://github.githubassets.com/favicons/favicon.svg",name:"Github",description:"GitHub is where people build software. More than 73 million people use GitHub to discover, fork, and contribute to over 200 million projects.",keywords:["tech","readings"]},{id:"019d3dc5-83f8-4b96-8c3e-4e0f5687782a",type:"bookmark",url:"https://phoenixzqy.github.io",icon:"",name:"Blog",description:"Felix's blog site, powered by Github page",keywords:["blog","readings"]},{id:"ae85a034-e663-47df-8144-69dd6e65ab03",type:"bookmark",url:"https://www.linkedin.com/in/qiyu-zhao-b02352b6/",icon:"https://static-exp1.licdn.com/sc/h/al2o9zrvru7aqj8e1x2rzsrca",name:"LinkedIn",description:"500 million+ members | Manage your professional identity. Build and engage with your professional network. Access knowledge, insights and opportunities.",keywords:["social"]}]},{id:"pokeclicker",type:"application"}]}];var ut={siteConfig:ct,homepages:dt};const oe="mbookmark_gist_database",Se=100;class pt{constructor(){const e=this.getToken();e&&(this.octokit=new je({auth:e}))}getLocalConfig(){let e=window.localStorage.getItem("localConfig");return e||(e=JSON.stringify({token:"",gistid:""}),window.localStorage.setItem("localConfig",e)),JSON.parse(e)}setLocalConfig(e){window.localStorage.setItem("localConfig",JSON.stringify(e)),e.token&&(this.octokit=new je({auth:e.token}))}clearLocalConfig(){window.localStorage.removeItem("localConfig")}getToken(){return this.getLocalConfig().token}async initData(){if(this.getGistId())return this.getData();let e=1,a=Se;for(;a>=Se;){let c=(await this.getGists(e++)).data;a=c.length;for(let d=0;d<c.length;d++)if(Object.keys(c[d].files).includes(oe)){let r=(await this.getGist(c[d].id)).data;return this.setLocalConfig({token:this.getToken(),gistid:r.id}),JSON.parse(this.decrypt(r.files[oe].content))}}const p=(await this.createGist({[oe]:{filename:oe,content:this.encrypt(JSON.stringify(ut))}},"This is the mBookmark database file")).data;return this.setLocalConfig({token:this.getToken(),gistid:p.id}),JSON.parse(this.decrypt(p.files[oe].content))}async getData(){let{data:e}=await this.getGist(this.getGistId());return JSON.parse(this.decrypt(e.files[oe].content))}async updateData(e){await this.updateGist(this.getGistId(),{[oe]:{content:this.encrypt(e)}})}async deleteData(){await this.deleteGist(this.getGistId())}getGistId(){return this.getLocalConfig().gistid}async getGists(e=1){return this.octokit.request("GET /gists",{per_page:Se,page:e})}async getGist(e){return this.octokit.request("GET /gists/{gist_id}",{gist_id:e})}async createGist(e,a,n){return this.octokit.request("POST /gists",{description:a||"",files:e,public:n||!1})}async updateGist(e,a,n){return this.octokit.request("PATCH /gists/{gist_id}",{gist_id:e,description:n,files:a})}async deleteGist(e){return this.octokit.request("DELETE /gists/{gist_id}",{gist_id:e})}encrypt(e){return Pe.AES.encrypt(e,this.getToken()).toString()}decrypt(e){return Pe.AES.decrypt(e,this.getToken()).toString(Pe.enc.Utf8)}}const te=new pt;var se;(function(t){t[t.up=0]="up",t[t.down=1]="down",t[t.left=2]="left",t[t.right=3]="right"})(se||(se={}));function Fe(t,e){if(!t||!e||e.x-t.x==0&&e.y-t.y==0)return!1;const a=e.x-t.x,n=e.y-t.y;return Math.abs(a)<50&&Math.abs(n)<50?!1:Math.abs(a)>Math.abs(n)?a>0?3:2:n>0?1:0}function De(){var t=new Date().getTime(),e=typeof performance!="undefined"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var n=Math.random()*16;return t>0?(n=(t+n)%16|0,t=Math.floor(t/16)):(n=(e+n)%16|0,e=Math.floor(e/16)),(a==="x"?n:n&3|8).toString(16)})}function fe(){return De().split("-")[0]}function _e(t){return{x:t.offsetWidth,y:t.offsetHeight}}function ce(t){var e=t.getBoundingClientRect(),a=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;return{top:e.top+n,left:e.left+a}}const G=window.M;G.showLoader=()=>{const t=document.querySelector(".global-loader-container");t&&(t.style.display="flex")};G.hideLoader=()=>{const t=document.querySelector(".global-loader-container");t&&(t.style.display="none")};const J=Le();let Ie;(function(t){t[t.normal=0]="normal",t[t.edit=1]="edit"})(Ie||(Ie={}));function gt(t){const[e,a]=x(Ie.normal),[n,p]=x({siteConfig:{},homepages:[]}),f=w(()=>{const r=n().homepages[1]?.items||[];let l=[];for(let o in r)if(r[o].type===N)for(let i in r[o].items)l=l.concat(r[o].items[i].keywords||[]);else l=l.concat(r[o].keywords||[]);return l});function c(r,l){let o=r.homepages[1].items;for(let i in o){if(o[i].type===N){for(let s in o[i].items)if(l===o[i].items[s].id){let g=o[i].items.splice(s,1)[0];return o[i].items.length===0&&o.splice(i,1),g}}if(l===o[i].id)return o.splice(i,1)[0]}return!1}async function d(r){G.showLoader(),JSON.parse(JSON.stringify(n()));let l=r(JSON.parse(JSON.stringify(n())));await te.updateData(JSON.stringify(l));let o=await te.getData();o?(G.toast({html:"Successfully saved!",classes:"green"}),p(o)):G.toast({html:"Failed to save!",classes:"red"}),G.hideLoader()}const h={appMode:e,setAppMode:a,userConfig:n,setUserConfig:p,keywords:f,getUserSiteConfig:w(()=>n().siteConfig),setUserSiteConfig:r=>{d(l=>(l.siteConfig={...r},JSON.parse(JSON.stringify(l))))},getUserHomepageConfig:w(()=>n().homepages),addEntry:(r,l)=>{d(o=>{const i=o.homepages[1].items;if(!l)i.push(r);else for(let s in i)l===i[s].id&&i[s].type===N&&i[s].items.push(r);return JSON.parse(JSON.stringify(o))})},removeEntry:r=>{let l=!1;return d(o=>{c(o,r);let i=o.homepages[1].items;for(let s=i.length-1;s>=0;s--)i[s].type===N&&i[s].items.length===0&&(i.splice(s,1),l=!0);return JSON.parse(JSON.stringify(o))}),l},updateEntry:r=>{const l=r.id;d(o=>{let i=o.homepages[1].items;for(let s in i)if(i[s].type!==N)l===i[s].id&&(i[s]={...i[s],...r});else for(let g in i[s].items)l===i[s].items[g].id&&(i[s].items[g]={...i[s].items[g],...r});return JSON.parse(JSON.stringify(o))})},updateMiniGroup:(r,l)=>{d(o=>{let i=o.homepages[1].items;for(let s in i)i[s].type===N&&r===i[s].id&&(i[s]={...i[s],...l});return JSON.parse(JSON.stringify(o))})},moveEntryIntoMiniGroup:(r,l)=>{d(o=>{let i=c(o,r),s=o.homepages[1].items;for(let g in s)l===s[g].id&&s[g].type===N&&s[g].items.push(i);return JSON.parse(JSON.stringify(o))})},createMiniGroupBy2Entry:(r,l)=>{d(o=>{let i=c(o,r),s=o.homepages[1].items;for(let g in s)if(s[g].id===l&&s[g].type!==N){const m=s[g];s[g]={id:De(),type:N,name:"new group",items:[m,i]};break}return JSON.parse(JSON.stringify(o))})},reOrderEntries:(r,l,o,i)=>{d(s=>{let g=s.homepages[1].items;if(i){e:for(let m in g)if(!(g[m].type!==N||g[m].id!==i)){if(o==="last"){g[m].items.length>1&&g[m].items.push(c(s,r));break}else for(let D in g[m].items)if(g[m].items[D].id===o){g[m].items.splice(l==="before"?D:~~D+1,0,c(s,r));break e}}}else if(o==="last")g.push(c(s,r));else for(let m in g)if(g[m].id===o){g.splice(l==="before"?m:~~m+1,0,c(s,r));break}return JSON.parse(JSON.stringify(s))})},moveEntryOutFromMoniGroup:(r,l)=>{d(o=>{let i=c(o,r);return l>=0?o.homepages[1].items.splice(l,0,i):o.homepages[1].items.push(i),JSON.parse(JSON.stringify(o))})}};return u(J.Provider,{value:h,get children(){return t.children}})}const ft=v('<div class="homepage-app-container"><div class="feed-homepage-back-btn"><i class="material-icons">home</i></div><div class="feed-homepage-container"><div class="feed-homepage-ifram-container"><iframe class="feed-homepage-iframe" title="description"></iframe></div></div></div>');function ht(t){const{getUserSiteConfig:e}=E(J),{backToHomepage:a}=t;return(()=>{const n=ft.cloneNode(!0),p=n.firstChild,f=p.nextSibling,c=f.firstChild,d=c.firstChild;return p.$$click=()=>a(),C(()=>O(d,"src",e().features.feedPageUrl)),n})()}q(["click"]);const mt=v('<div class="font-app-icon fullscreen-app-icon"><i class="material-icons"></i></div>'),yt="fullscreen";function vt(t){const[e,a]=x(!1);return R(()=>{document.addEventListener("fullscreenchange",function(){a(!e())})}),(()=>{const n=mt.cloneNode(!0),p=n.firstChild;return n.$$click=()=>{e()?document.exitFullscreen():document.body.requestFullscreen()},y(p,()=>e()?"fullscreen_exit":"fullscreen"),n})()}q(["click"]);const Oe={id:yt,name:"Fullscreen",description:"Enter fullscreen mode",icon:vt},z=Le(),Ke={type:P.homepage};function $t(t){const[e,a]=x([]),[n,p]=x(0),[f,c]=x({}),[d,h]=x(Ke);function r(s){if(s.show)s.show();else if(s.ref){const g=s.ref;g.classList.remove("screen-layer-hide"),g.classList.add("screen-layer-show")}}function l(s){if(s.hide&&s.hide(),s.ref){const g=s.ref;g.classList.remove("screen-layer-show"),g.classList.add("screen-layer-hide")}}function o(s){return f()[s.type]!==void 0}const i={currentScreenLayer:d,layers:f,register:s=>{f()[s.type]||(s.type!==Ke.type?l(s):(a(g=>(g.push(s),g)),h(s)),c(g=>(g[s.type]=s,g)))},showLayer(s){if(!o(s)){console.error(`invalid/unregistered screen type: ${JSON.stringify(s)}`);return}if(d().type===s.type)return;l(d());const g={...f()[s.type],...s};n()===e().length-1?a(m=>(m.push(g),m)):a(m=>(m.length=n()+1,m.push(g),m)),p(n()+1),h(g),c(m=>(m[g.type]=g,m)),r(g)},backToPrevLayer:()=>{n()!==0&&(h(s=>{l(s);const g=e()[n()-1];return r(g),g}),p(n()-1))},goToNextLayer:()=>{n()!==e().length-1&&(h(s=>{l(s);const g=e()[n()+1];return r(g),g}),p(n()+1))}};return u(z.Provider,{value:i,get children(){return t.children}})}const de=Le();function kt(t){const[e,a]=x({}),[n,p]=x(void 0),{showLayer:f}=E(z),c={applications:e,currentApplication:n,launchApplication:d=>{if(!Ge[d])throw new Error(`Invalid application id: ${d}`);a(h=>(h[d]={id:d,application:Ge[d].application},h)),p(d),f({type:P.applicationPopover})},killApplication:d=>{a(h=>(h[d]=void 0,h))}};return u(de.Provider,{value:c,get children(){return t.children}})}var bt="https://phoenixzqy.github.io/demo/mBookmark/assets/Pokeball.08405e7f.svg";const wt=v('<div class="image-app-icon pokeclicker-app-icon"><img></div>'),Xe="pokeclicker";function _t(t){const{launchApplication:e}=E(de);return(()=>{const a=wt.cloneNode(!0),n=a.firstChild;return a.$$click=()=>{e(Xe)},O(n,"src",bt),a})()}q(["click"]);const Et=v('<div><iframe src="https://g8hh.github.io/pokeclicker/" frameborder="0"></iframe></div>');function xt(t){return(()=>{const e=Et.cloneNode(!0),a=e.firstChild;return e.style.setProperty("width","100%"),e.style.setProperty("height","100%"),a.style.setProperty("width","100%"),a.style.setProperty("height","100%"),e})()}const Ye={id:Xe,name:"Poke Clicker",description:"pokeclicker game",icon:_t,application:xt};var Ct="https://phoenixzqy.github.io/demo/mBookmark/assets/qrcode.3b9df612.png";const Pt=v('<div class="image-app-icon qrcode-app-icon"><img></div>'),We="qrcodescanner";function Lt(t){const{launchApplication:e}=E(de);return(()=>{const a=Pt.cloneNode(!0),n=a.firstChild;return a.$$click=()=>{e(We)},O(n,"src",Ct),a})()}q(["click"]);const Nt=v("<div>QRCode Scanner</div>");function St(t){return Nt.cloneNode(!0)}const Ae={id:We,name:"QRCode Scanner",description:"Scan qrcode",icon:Lt,application:St},Dt=v('<div class="font-app-icon readme-app-icon"><i class="material-icons">local_library</i></div>'),Qe="readme";function It(t){const{launchApplication:e}=E(de);return(()=>{const a=Dt.cloneNode(!0);return a.$$click=()=>{e(Qe)},a})()}q(["click"]);const Ot=v("<div>ReadMe</div>");function At(t){return(()=>{const e=Ot.cloneNode(!0);return e.style.setProperty("width","100%"),e.style.setProperty("height","100%"),e})()}const Te={id:Qe,name:"ReadMe",description:"mBookmark user instructions",icon:It,application:At};var Tt="https://phoenixzqy.github.io/demo/mBookmark/assets/settings.17bb5709.png";const Mt=v('<div class="image-app-icon settings-app-icon"><img></div>'),Ve="settings";function Bt(t){const{launchApplication:e}=E(de);return(()=>{const a=Mt.cloneNode(!0),n=a.firstChild;return a.$$click=()=>{e(Ve)},O(n,"src",Tt),a})()}q(["click"]);const Ht=v('<i class="material-icons left"></i>'),Gt=v("<a></a>");function he(t){const{disabled:e=!1,className:a="",size:n,onClick:p,style:f={}}=t,c=w(()=>{let d="waves-effect waves-light";return e&&(d+=" disabled"),n==="small"?d+=" btn-small":n==="large"?d+=" btn-large":d+=" btn",a&&(d+=` ${a}`),d});return(()=>{const d=Gt.cloneNode(!0);return Ne(d,"click",p,!0),W(d,f),y(d,u(F,{get when(){return t.icon},get children(){const h=Ht.cloneNode(!0);return y(h,()=>t.icon),h}}),null),y(d,()=>t.children,null),C(()=>d.className=c()),d})()}q(["click"]);const qt=v("<div></div>");function Ut(t){let e;const{className:a="",style:n={},useContextMenu:p=!1}=t,f=fe(),c=w(()=>t.menuItems||[]),d=r=>{r.preventDefault(),r.stopPropagation(),document.getElementById(f).remove()},h=r=>{r.preventDefault(),r.stopPropagation();let l=document.createElement("div");l.id=f,l.classList.add("mbm-dropdown-container");let o=`<ul class="dropdown-content">
      ${c().map(s=>`<li><a href="#!">${s.label}</a></li>`).join("")}
    </ul>`;l.innerHTML=o,Array.from(l.querySelectorAll("li")).forEach((s,g)=>{typeof c()[g].onClick=="function"&&(s.onclick=m=>{m.preventDefault(),m.stopPropagation(),c()[g].onClick(m),d(m)})});const i=l.querySelector("ul");i.style.left=r.clientX+"px",i.style.top=r.clientY+"px",l.onclick=s=>d(s),l.oncontextmenu=s=>d(s),document.body.appendChild(l)};return R(()=>{p?e.oncontextmenu=r=>h(r):e.onclick=r=>h(r)}),(()=>{const r=qt.cloneNode(!0),l=e;return typeof l=="function"?l(r):e=r,O(r,"data-target",f),W(r,n),r.className=a,y(r,()=>t.children),r})()}const Me=v("<label></label>"),Be=v('<span class="helper-text"></span>'),Rt=v('<div><input class="validate"></div>'),Jt=v('<div><textarea class="validate"></textarea></div>'),zt=v('<div><label><i class="material-icons left">search</i></label><input></div>'),jt=v('<div class="input-field"><div class="chips chips-placeholder chips-autocomplete"></div></div>'),Ft=v('<div class="input-field"><select></select><label></label></div>'),Kt=v("<option></option>");function V(t){const e=fe(),{type:a="text",onChange:n,onInput:p,style:f={},className:c="",ref:d,disabled:h=!1,maxlength:r}=t,l={type:a,onChange:n,onInput:p,ref:d,disabled:h,maxlength:r},o=w(()=>t.value);return(()=>{const i=Rt.cloneNode(!0),s=i.firstChild;return i.className=`input-field ${c}`,W(i,f),O(s,"id",e),ne(s,l,!1,!1),y(i,u(F,{get when(){return t.label},get children(){const g=Me.cloneNode(!0);return O(g,"for",e),y(g,()=>t.label),C(()=>g.classList.toggle("active",o())),g}}),null),y(i,u(F,{get when(){return t.helperText},get children(){const g=Be.cloneNode(!0);return y(g,()=>t.helperText),g}}),null),C(()=>s.value=o()),i})()}function Ze(t){const e=fe(),{type:a="text",onChange:n,onInput:p,style:f={},className:c="",ref:d,rows:h,cols:r,maxlength:l}=t,o={type:a,onChange:n,onInput:p,ref:d,rows:h,cols:r,maxlength:l},i=w(()=>t.value);return(()=>{const s=Jt.cloneNode(!0),g=s.firstChild;return s.className=`input-field mbm-textarea ${c}`,W(s,f),O(g,"id",e),ne(g,o,!1,!1),y(s,u(F,{get when(){return t.label},get children(){const m=Me.cloneNode(!0);return O(m,"for",e),y(m,()=>t.label),C(()=>m.classList.toggle("active",i())),m}}),null),y(s,u(F,{get when(){return t.helperText},get children(){const m=Be.cloneNode(!0);return y(m,()=>t.helperText),m}}),null),C(()=>g.value=i()),s})()}function Xt(t){const{type:e="text",onChange:a,onInput:n,style:p={},className:f="",ref:c}=t,d={type:e,onChange:a,onInput:n,ref:c},h=w(()=>t.value||"");return(()=>{const r=zt.cloneNode(!0),l=r.firstChild,o=l.nextSibling;return r.className=`mbm-search-bar ${f}`,W(r,p),ne(o,d,!1,!1),C(()=>o.value=h()),r})()}function et(t){const{options:e={},label:a="",helperText:n="",onChange:p=s=>{}}=t,f=fe(),[c,d]=x(!1),[h,r]=x(),l=()=>{d(!0)},o=()=>{d(!1)},i=()=>{const s=G.Chips.getInstance(document.getElementById(f)).chipsData;p(s)};return ke(()=>{h()&&G.Chips.init(document.getElementById(f),{...t.options,onChipAdd:i,onChipDelete:i})}),R(()=>{let s=document.getElementById(f);s&&(G.Chips.init(document.getElementById(f),{...e,onChipAdd:i,onChipDelete:i}),r(()=>{const g=s.querySelector("input");return g.addEventListener("focus",l),g.addEventListener("blur",()=>o),g}))}),be(()=>{try{h()&&(h().removeEventListener("focus",l),h().removeEventListener("blur",()=>o))}catch(s){console.error(s)}}),(()=>{const s=jt.cloneNode(!0),g=s.firstChild;return O(g,"id",f),y(s,u(F,{when:a,get children(){const m=Me.cloneNode(!0);return O(m,"for",f),m.style.setProperty("top","-25px"),y(m,a),C(()=>m.classList.toggle("keywords-input-label-active",c())),m}}),null),y(s,u(F,{when:n,get children(){const m=Be.cloneNode(!0);return m.style.setProperty("margin-top","-14px"),y(m,n),m}}),null),s})()}function Yt(t){let e;const{label:a="",options:n=[],onSelected:p}=t,[f,c]=x(void 0);let d=fe();return R(()=>{const h=document.getElementById(d),r=G.FormSelect.init(h);c(r);let l=Array.from(e.querySelectorAll(".select-dropdown li"))||[];const o=e.querySelector("ul").id;l.forEach(i=>i.addEventListener("click",s=>{const g=s.target?.parentElement?.id.replace(o,"");console.log(g),g!==void 0&&typeof p=="function"&&p(n[g].value)})),l.forEach(i=>i.addEventListener("keyup",s=>{if(s.key!==lt)return;const g=s.target?.parentElement?.id.replace(o,"");g!==void 0&&typeof p=="function"&&p(n[g].value)}))}),be(()=>{f().destroy()}),(()=>{const h=Ft.cloneNode(!0),r=h.firstChild,l=r.nextSibling,o=e;return typeof o=="function"?o(h):e=h,O(r,"id",d),y(r,u(Q,{each:n,children:i=>(()=>{const s=Kt.cloneNode(!0);return y(s,()=>i.display),C(g=>{const m=i.value,D=!!i.disabled,K=!!i.selected;return m!==g._v$&&(s.value=g._v$=m),D!==g._v$2&&(s.disabled=g._v$2=D),K!==g._v$3&&(s.selected=g._v$3=K),g},{_v$:void 0,_v$2:void 0,_v$3:void 0}),s})()})),y(l,a),h})()}const tt=v("<div></div>"),Ee={};for(let t=1;t<=12;t++)for(let e of["s","m","l","xl"])Ee[`${e}${t}`]=`${e}${t}`,Ee[`offset-${e}${t}`]=`offset-${e}${t}`;function U(t){const{className:e="",style:a={},onClick:n}=t;return(()=>{const p=tt.cloneNode(!0);return Ne(p,"click",n,!0),p.className=`row ${e}`,W(p,a),y(p,()=>t.children),p})()}function S(t){const{style:e={}}=t,a=w(()=>{let n="col";return Object.keys(t).forEach(p=>{Ee[p]&&(n+=` ${Ee[p]}`)}),t.className&&(n+=` ${t.className}`),n});return(()=>{const n=tt.cloneNode(!0);return W(n,e),y(n,()=>t.children),C(()=>n.className=a()),n})()}q(["click"]);const Wt=v('<div class="global-loader-container"><div class="preloader-wrapper big active"><div class="spinner-layer spinner-blue"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div><div class="spinner-layer spinner-red"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div><div class="spinner-layer spinner-yellow"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div><div class="spinner-layer spinner-green"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div></div></div>');function Qt(t){return(()=>{const e=Wt.cloneNode(!0);return e.style.setProperty("display","none"),e})()}const Vt=v("<h4>Settings</h4>"),Zt=v("<h5>Account</h5>"),en=v("<h5>Appearance</h5>"),tn=v("<h5>Feature</h5>"),nn=v('<div class="settings-app-wrapper"></div>');function rn(t){const{getUserSiteConfig:e,setUserSiteConfig:a}=E(J),[n,p]=x(e()),f=w(()=>{let r=te.getToken();return r?r.substring(0,5)+"*".repeat(20)+r.substring(r.length-5,r.length):""}),c=r=>l=>{let o;const i=r.split(".");i[1]==="wallpaperType"?o=l:o=l.target.value,p(s=>(s[i[0]][i[1]]=o,s))},d=()=>{a(n())},h=()=>{te.clearLocalConfig(),document.location.reload()};return(()=>{const r=nn.cloneNode(!0);return y(r,u(U,{get children(){return[(()=>{const l=Vt.cloneNode(!0);return l.style.setProperty("font-weight","bold"),l})(),u(S,{s12:!0,get children(){return[u(U,{get children(){return[Zt.cloneNode(!0),u(S,{s10:!0,get children(){return u(V,{disabled:!0,get value(){return f()},label:"Github Token"})}}),u(S,{s2:!0,get children(){return u(he,{onClick:h,icon:"exit_to_app",className:"btn-floating",style:{"background-color":"rgb(234 85 85)",top:"7.5px"}})}}),en.cloneNode(!0),u(S,{s12:!0,get children(){return u(Yt,{label:"Wallpaper Type",get onSelected(){return c("appearance.wallpaperType")},get options(){return[{value:ee.image,selected:ee.image===n().appearance.wallpaperType,display:ee.image.toUpperCase()},{value:ee.video,selected:ee.video===n().appearance.wallpaperType,display:ee.video.toUpperCase()}]}})}}),u(S,{s12:!0,get children(){return u(V,{get onChange(){return c("appearance.wallpaperUrl")},label:"Wallpaper Url",get value(){return n().appearance.wallpaperUrl},maxlength:"2000",helperText:"Max length: 2000"})}}),tn.cloneNode(!0),u(S,{s12:!0,get children(){return u(V,{get onChange(){return c("features.feedPageUrl")},label:"Feed Page Url",get value(){return n().features.feedPageUrl},maxlength:"2000",helperText:"Max length: 2000"})}})]}}),u(U,{className:"submit-button",style:{"text-align":"center"},get children(){return u(he,{onClick:d,icon:"save",children:"Save Changes"})}})]}})]}})),r})()}const He={id:Ve,name:"Settings",description:"mBookmark Settings",icon:Bt,application:rn},Ge={[Oe.id]:Oe,[Ae.id]:Ae,[Te.id]:Te,[He.id]:He,[Ye.id]:Ye},on={enableOnHold:!0,onHoldTime:200},me=[-1,-1];class sn{constructor(e){this.draggingElement=void 0,this.isDragging=!1,this.initKeyDownPos=[...me],this.currentKeyPos=[...me],this.options={...on,...e}}findParentDraggableElement(e){if(e.attributes.getNamedItem("is-draggable"))return e;if(!!e.parentElement)return this.findParentDraggableElement(e.parentElement)}findParentHoverableElement(e){if(e.attributes.getNamedItem("is-hoverable"))return e;if(!!e.parentElement)return this.findParentDraggableElement(e.parentElement)}initDragging(e,a){this.initKeyDownPos.toString()===this.currentKeyPos.toString()&&this.currentKeyPos.toString()!==me.toString()&&(this.draggingElement.style.width=this.draggingElement.offsetWidth+"px",this.draggingElement.style.height=this.draggingElement.offsetHeight+"px",this.draggingElement.style.left=(this.currentKeyPos[0]-this.draggingElement.offsetWidth/2).toString()+"px",this.draggingElement.style.top=(this.currentKeyPos[1]-this.draggingElement.offsetHeight/2).toString()+"px",this.draggingElement.style.transitionDuration="unset",this.draggingElement.style.pointerEvents="none",this.draggingElement.style.zIndex="1",this.draggingElement.style.position="fixed",this.isDragging=!0,a&&this.isDragging&&a(e,this.draggingElement))}mouseDownHandler(e,a){this.draggingElement=this.findParentDraggableElement(e.target),!!this.draggingElement&&(this.initKeyDownPos=[e.clientX,e.clientY],this.currentKeyPos=[e.clientX,e.clientY],this.options.enableOnHold?setTimeout(()=>{this.initDragging(e,a)},300):this.initDragging(e,a))}mouseMoveHandler(e,a){!this.draggingElement||(this.currentKeyPos=[e.clientX,e.clientY],this.isDragging&&(this.draggingElement.style.left=(this.currentKeyPos[0]-this.draggingElement.offsetWidth/2).toString()+"px",this.draggingElement.style.top=(this.currentKeyPos[1]-this.draggingElement.offsetHeight/2).toString()+"px"),a&&a(e,this.draggingElement))}mouseUpHandler(e,a){!this.draggingElement||(this.isDragging=!1,this.initKeyDownPos=[...me],this.currentKeyPos=[...me],this.draggingElement.style.transform="scale(1)",this.draggingElement.style.left=void 0,this.draggingElement.style.top=void 0,this.draggingElement.style.pointerEvents="all",a&&a(e,this.draggingElement),this.draggingElement=void 0)}mouseEnterHandler(e,a){if(!this.draggingElement||!this.isDragging)return;const n=this.findParentHoverableElement(e.target);a&&a(e,n,this.draggingElement)}mouseOverHandler(e,a){if(!this.draggingElement||!this.isDragging)return;const n=this.findParentHoverableElement(e.target);a&&a(e,n,this.draggingElement)}mouseLeaveHandler(e,a){if(!this.draggingElement||!this.isDragging)return;const n=this.findParentHoverableElement(e.target);a&&a(e,n,this.draggingElement)}getData(){return this.data}setData(e){this.data=e}clearData(){this.data=void 0}onDragStart(e,a){e.addEventListener("mousedown",n=>{this.mouseDownHandler(n,a)})}onDragMove(e,a){e.addEventListener("mousemove",n=>{this.mouseMoveHandler(n,a)})}onDragEnd(e,a){e.addEventListener("mouseup",n=>{this.mouseUpHandler(n,a),this.clearData()})}onDragEnter(e,a){e.addEventListener("mouseenter",n=>{this.mouseEnterHandler(n,a)})}onDragOver(e,a){e.addEventListener("mouseover",n=>{this.mouseOverHandler(n,a)})}onDragLeave(e,a){e.addEventListener("mouseleave",n=>{this.mouseLeaveHandler(n,a)})}}const b=new sn,an=v('<span class="entry-title"></span>');function qe(t){const e=w(()=>t.name);return(()=>{const a=an.cloneNode(!0);return y(a,e),a})()}const ln=v('<div class="entry-wrapper"><div class="entry-container"></div></div>');function cn(t){let e;const{id:a,style:n={},isDraggable:p=!1}=t,f={id:a,style:n},c=w(()=>t.config),d=w(()=>{if(!!c().id)return Ge[c().id]}),h=d()?.icon,r={"is-draggable":p,"is-hoverable":p,"is-droppable":p};return R(()=>{p&&(b.onDragStart(e,(l,o)=>{o.style.transform="scale(1.2)",b.setData({dragging:c(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0})}),b.onDragOver(e,(l,o,i)=>{if(l.target.classList.contains("entry-container"))o.style.transform="scale(1.1)",b.setData({...b.getData(),dropOn:c(),dropBefore:void 0,dropAfter:void 0});else{o.style.transform="scale(1)";let g={...b.getData(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0};const m=ce(i),D=ce(o);m.left<D.left?g.dropBefore=c():g.dropAfter=c(),b.setData(g)}}),b.onDragLeave(e,(l,o,i)=>{o!==i&&(o.style.transform="scale(1)",b.setData({...b.getData(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0}))}))}),(()=>{const l=ln.cloneNode(!0),o=l.firstChild,i=e;return typeof i=="function"?i(l):e=l,ne(l,f,!1,!0),ne(l,r,!1,!0),o.style.setProperty("background-image","none"),y(o,u(h,{})),y(l,u(qe,{get name(){return d()?.name}}),null),C(s=>{const g=X.application,m=`${d()?.name}: ${d()?.description||""}`;return g!==s._v$&&O(l,"entry-type",s._v$=g),m!==s._v$2&&O(o,"title",s._v$2=m),s},{_v$:void 0,_v$2:void 0}),l})()}const dn=v('<div class="entry-container"></div>'),un=v('<div class="entry-wrapper" is-draggable is-hoverable is-droppable></div>');function pn(t){let e;const{showLayer:a,backToPrevLayer:n,currentScreenLayer:p}=E(z),{removeEntry:f}=E(J),c=w(()=>t.config),{id:d,style:h={}}=t,r={id:d,style:h};function l(o){window.open(c().url)}return R(()=>{b.onDragStart(e,(o,i)=>{i.style.transform="scale(1.2)",b.setData({dragging:c(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0})}),b.onDragOver(e,(o,i,s)=>{if(o.target.classList.contains("entry-container"))i.style.transform="scale(1.1)",b.setData({...b.getData(),dropOn:c(),dropBefore:void 0,dropAfter:void 0});else{i.style.transform="scale(1)";let m={...b.getData(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0};const D=ce(s),K=ce(i);D.left<K.left?m.dropBefore=c():m.dropAfter=c(),b.setData(m)}}),b.onDragLeave(e,(o,i,s)=>{i!==s&&(i.style.transform="scale(1)",b.setData({...b.getData(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0}))})}),(()=>{const o=un.cloneNode(!0),i=e;return typeof i=="function"?i(o):e=o,ne(o,r,!1,!0),y(o,u(Ut,{useContextMenu:!0,options:{autoTrigger:!1,alignment:"left"},menuItems:[{label:"Edit",onClick:()=>{a({type:P.editBookmarkPopover,data:c()})}},{label:"Remove",onClick:()=>{f(c().id)&&p().type===P.groupPopover&&n()}}],style:{height:"55px",width:"55px",position:"relative"},get children(){const s=dn.cloneNode(!0);return s.$$click=l,C(g=>{const m=`${c().name}: ${c().description}`,D=c().icon?`url("${c().icon}")`:void 0;return m!==g._v$&&O(s,"title",g._v$=m),D!==g._v$2&&s.style.setProperty("background-image",g._v$2=D),g},{_v$:void 0,_v$2:void 0}),s}}),null),y(o,u(qe,{get name(){return c().name}}),null),C(()=>O(o,"entry-type",X.bookemark)),o})()}q(["click"]);function Ue(t){const e=w(()=>t.config),{style:a={},isDraggable:n=!1}=t,p={style:a,isDraggable:n};function f(c){switch(c){case X.application:return u(cn,ge({get config(){return e()}},p));case X.bookemark:return u(pn,ge({get config(){return e()}},p));default:return null}}return ze(()=>f(e().type))}const gn=v('<div class="mini-entry-group-wrapper" is-draggable is-hoverable is-droppable><div class="mini-entry-group-container"></div></div>'),fn=v('<div class="mini-entry-inner-app"></div>');function hn(t){let e;const{showLayer:a}=E(z),n=w(()=>t.config);function p(){a({type:P.groupPopover,data:n()})}return R(()=>{b.onDragStart(e,(f,c)=>{c.style.transform="scale(1.2)",b.setData({dragging:n(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0})}),b.onDragOver(e,(f,c,d)=>{if(f.target.classList.contains("mini-entry-group-container"))c.style.transform="scale(1.1)",b.setData({...b.getData(),dropOn:n(),dropBefore:void 0,dropAfter:void 0});else{c.style.transform="scale(1)";let r={...b.getData(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0};const l=ce(d),o=ce(c);l.left<o.left?r.dropBefore=n():r.dropAfter=n(),b.setData(r)}}),b.onDragLeave(e,(f,c,d)=>{c.style.transform="scale(1)",b.setData({...b.getData(),dropOn:void 0,dropBefore:void 0,dropAfter:void 0})})}),(()=>{const f=gn.cloneNode(!0),c=f.firstChild,d=e;return typeof d=="function"?d(f):e=f,O(f,"entry-type",N),c.$$click=p,y(c,u(Q,{get each(){return n().items?.slice(0,9)},children:h=>(()=>{const r=fn.cloneNode(!0);return C(()=>r.style.setProperty("background-image",h.icon?`url("${h.icon}")`:void 0)),r})()})),y(f,u(qe,{get name(){return n().name}}),null),f})()}q(["click"]);const mn=v('<div class="entry-wrapper"><div class="add-entry-button-container" title="Add an app/bookmark"></div></div>');function nt(t){const e=w(()=>t.parentId),{showLayer:a}=E(z);function n(){a({type:P.addBookmarkPopover,data:{parentId:e}})}return(()=>{const p=mn.cloneNode(!0),f=p.firstChild;return f.$$click=n,p})()}q(["click"]);const yn=v("<div></div>");function xe(t){let e;const{style:a,callback:n,holdDuration:p=500}=t,[f,c]=x(!1);let d,h=[-1,-1];return R(()=>{f()||(c(!0),b.onDragMove(e,(r,l)=>{h=[r.clientX,r.clientY],d&&clearInterval(d),d=setTimeout(()=>{r.clientX,h[0],r.clientY===h[1]&&n(r)},p)}),b.onDragLeave(e,()=>{d&&clearInterval(d)}))}),(()=>{const r=yn.cloneNode(!0),l=e;return typeof l=="function"?l(r):e=r,W(r,a),r})()}const vn=v('<div class="homepage-app-container"></div>');function $n(t){let e;const{pageNumber:a,pageCount:n,setCurrentHomepage:p}=t,{createMiniGroupBy2Entry:f,moveEntryIntoMiniGroup:c,reOrderEntries:d}=E(J),h=w(()=>t.config),r=w(()=>t.capacity);return R(()=>{b.onDragMove(e),b.onDragEnd(e,(l,o)=>{o.style.transform="scale(1)";const i=b.getData();i&&i.dragging&&(i.dragging.type!==N&&i.dropOn?.type===N?c(i.dragging.id,i.dropOn.id):i.dragging.type!==N&&i.dropOn?f(i.dragging.id,i.dropOn.id):i.dragging.type===N&&i.dropOn?d(i.dragging.id,"before",i.dropOn.id):i.dropBefore?d(i.dragging.id,"before",i.dropBefore.id):i.dropAfter?d(i.dragging.id,"after",i.dropAfter.id):d(i.dragging.id,"after","last"))})}),(()=>{const l=vn.cloneNode(!0),o=e;return typeof o=="function"?o(l):e=l,y(l,u(xe,{style:{display:"blcok",height:"100%",width:"20px",position:"absolute",top:"0",left:"0"},callback:i=>{a!==1&&p(s=>s-1)}}),null),y(l,u(Q,{get each(){return h().items},children:i=>i.type===N?u(hn,{config:i}):Object.values(X).includes(i.type)?u(Ue,{config:i,isDraggable:!0}):null}),null),y(l,u(F,{get when(){return(h()?.items?.length||0)<r()},get children(){return u(nt,{})}}),null),y(l,u(xe,{style:{display:"blcok",height:"100%",width:"20px",position:"absolute",top:"0",right:"0"},callback:i=>{a!==n-2&&p(s=>s+1)}}),null),l})()}const kn=v('<div class="homepage-app-container"></div>');function bn(t){return x(t.config),kn.cloneNode(!0)}const wn=v('<div class="homepage"></div>');function _n(t){const[e]=x(t.config);function a(n){switch(n){case ie.feed:return u(ht,ge({get config(){return e()}},t));case ie.normal:return u($n,ge({get config(){return e()}},t));case ie.widgets:return u(bn,ge({get config(){return e()}},t))}}return(()=>{const n=wn.cloneNode(!0);return y(n,()=>a(e().type)),n})()}var En="https://phoenixzqy.github.io/demo/mBookmark/assets/default_wallpaper.0d87bd85.jpg",xn="https://phoenixzqy.github.io/demo/mBookmark/assets/maxresdefault.c097630c.webp",Cn="https://phoenixzqy.github.io/demo/mBookmark/assets/default_live_wallpaper.a9a734d8.webm";const Pn=v('<div class="homepage-background"></div>'),Ln=v("<div></div>"),Nn=v('<video id="background-video" autoplay loop muted><source type="video/webm"></video>');function Sn(t){const{isSignedIn:e}=t,{currentScreenLayer:a}=E(z),{getUserSiteConfig:n}=E(J),p=w(()=>a().type===P.homepage&&e());return(()=>{const f=Pn.cloneNode(!0);return y(f,(()=>{const c=ze(()=>n()?.appearance?.wallpaperType===ee.image,!0);return()=>c()?(()=>{const d=Ln.cloneNode(!0);return d.style.setProperty("background-size","cover"),d.style.setProperty("height","100%"),d.style.setProperty("width","100%"),C(h=>{const r=`url("${n()?.appearance?.wallpaperUrl?n()?.appearance?.wallpaperUrl:En}"`,l=p()?"background-show":"background-hide";return r!==h._v$&&d.style.setProperty("background-image",h._v$=r),l!==h._v$2&&(d.className=h._v$2=l),h},{_v$:void 0,_v$2:void 0}),d})():(()=>{const d=Nn.cloneNode(!0),h=d.firstChild;return C(r=>{const l=n()?.appearance?.wallpaperUrl?n()?.appearance?.wallpaperUrl:xn,o=p()?"background-show":"background-hide",i=n()?.appearance?.wallpaperUrl?n()?.appearance?.wallpaperUrl:Cn;return l!==r._v$3&&O(d,"poster",r._v$3=l),o!==r._v$4&&(d.className=r._v$4=o),i!==r._v$5&&O(h,"src",r._v$5=i),r},{_v$3:void 0,_v$4:void 0,_v$5:void 0}),d})()})()),f})()}const Dn=v('<div class="dock-container"><div class="dock-background"></div></div>'),In=[Oe.id,Te.id,Ae.id,He.id];function On(t){const{style:e={}}=t,a={style:e};return(()=>{const n=Dn.cloneNode(!0);return n.firstChild,ne(n,a,!1,!0),y(n,u(Q,{each:In,children:p=>u(Ue,{get config(){return{id:p,type:X.application}}})}),null),n})()}const An=v('<div class="homepage-group-tabs"></div>'),Tn=v('<div class="homepage-group"></div>'),Mn=v('<div class="homepage-group-item"></div>'),Bn=v("<span></span>");function rt(t){return Math.floor(t.x/we.x)*Math.floor(t.y/we.y-1)}function Hn(t){const{defaultHomepage:e=1}=t,{currentScreenLayer:a,register:n,showLayer:p}=E(z),f=w(()=>a().type===P.homepage),[c,d]=x(e),[h,r]=x(0),l=w(()=>{let $=t.config;if(!h())return $;let I=$[e];const L=[];for(let A=0;A<I.items.length;A+=h())L.push({type:ie.normal,items:I.items.slice(A,A+h())});return I.items.length%h()==0&&L.push({type:ie.normal,items:[]}),[$[0],...L,...$.slice(2)]});function o($){return{left:`${($()-c())*100}%`}}function i(){d(e)}function s($){let I="homepage-group-tab";return $()===c()?I+" homepage-group-tab-active":I}function g($){if(!f())return;const{key:I}=$;!I||(I===re.Left&&c()>0?d(L=>L-1):I===re.Right&&c()<l().length-1?d(L=>L+1):I===re.Down&&p({type:P.searchPopover}))}let m={x:0,y:0},D;function K($){!f()||(D=new Date,$.changedTouches?m={x:$.changedTouches[0].screenX,y:$.changedTouches[0].screenY}:m={x:$.screenX,y:$.screenY})}function Y($){if(!f()||new Date-D>500)return;D=null;let L={x:-1,y:-1};$.changedTouches?L={x:$.changedTouches[0].screenX,y:$.changedTouches[0].screenY}:L={x:$.screenX,y:$.screenY};const A=Fe(m,L);!A||(A===se.right&&c()>0?d(j=>j-1):A===se.left&&c()<l().length-1?d(j=>j+1):A===se.down&&p({type:P.searchPopover}))}function $e(){const $=rt(_e(document.getElementById("app")));$!==h()&&(r($),d(e))}let ae;return R(()=>{n({type:P.homepage,ref:ae});const $=document.querySelector(".homepage-group");window.addEventListener("keydown",g),$.addEventListener("touchstart",K),$.addEventListener("touchend",Y),$.addEventListener("mousedown",K),$.addEventListener("mouseup",Y),window.addEventListener("resize",$e),r(rt(_e(document.getElementById("app"))))}),be(()=>{try{const $=document.querySelector(".homepage-group");window.removeEventListener("keydown",g),$.removeEventListener("touchstart",K),$.removeEventListener("touchend",Y),$.removeEventListener("mousedown",K),$.removeEventListener("mouseup",Y),window.removeEventListener("resize",$e)}catch($){console.error($)}}),(()=>{const $=Tn.cloneNode(!0),I=ae;return typeof I=="function"?I($):ae=$,y($,u(Q,{get each(){return l()},children:(L,A)=>(()=>{const j=Mn.cloneNode(!0);return y(j,u(_n,{config:L,get capacity(){return h()},get pageNumber(){return A()},get pageCount(){return l().length},setCurrentHomepage:d,backToHomepage:i})),C(le=>W(j,o(A),le)),j})()}),null),y($,u(F,{get when(){return c()>0},get children(){return[(()=>{const L=An.cloneNode(!0);return y(L,u(Q,{get each(){return l()},children:(A,j)=>(()=>{const le=Bn.cloneNode(!0);return C(()=>le.className=s(j)),le})()})),C(()=>L.style.setProperty("display",f()?"inline-block":"none")),L})(),u(On,{})]}}),null),$})()}const Gn=v('<div class="login-container"><p class="title">Login with Github Token</p></div>');function qn(t){const{setIsSignedIn:e}=t,[a,n]=x("");function p(c){n(c.target.value)}function f(){te.setLocalConfig({token:a(),gistid:""}),e(!0)}return(()=>{const c=Gn.cloneNode(!0);return c.firstChild,y(c,u(U,{get children(){return u(S,{s12:!0,get children(){return u(V,{onInput:p,label:"Github Token",value:""})}})}}),null),y(c,u(U,{style:{"text-align":"center"},get children(){return u(he,{onClick:f,style:{width:"125px"},children:"Login"})}}),null),c})()}const Un=v('<input class="popover-title">');function Re(t){const e=w(()=>t.name),a=w(()=>t.groupId),{updateMiniGroup:n}=E(J);function p(f){n(a(),{name:f.target.value}),f.target.blur()}return(()=>{const f=Un.cloneNode(!0);return f.addEventListener("change",p),C(c=>{const d=!!t.disabled,h=e();return d!==c._v$&&(f.disabled=c._v$=d),h!==c._v$2&&(f.value=c._v$2=h),c},{_v$:void 0,_v$2:void 0}),f})()}const Rn=v('<div class="popover-container group-popover-container"><div class="group-popover-tabs"></div><div class="group-popover-wrapper"></div></div>'),Jn=v("<span></span>"),zn=v('<div class="group-popover-page"></div>');function it(t){return Math.floor(t.x/we.x)*Math.floor(t.y/we.y)}function jn(t){let e;const{currentScreenLayer:a,layers:n}=E(z),{getUserHomepageConfig:p,moveEntryOutFromMoniGroup:f,moveEntryIntoMiniGroup:c,reOrderEntries:d}=E(J),h=w(()=>a().type===P.groupPopover),{defaultPage:r=0}=t,[l,o]=x(r),[i,s]=x(0),[g,m]=x(""),[D,K]=x("");x(!1);const Y=w(()=>{let k="";if(a().type===P.groupPopover?k=a().data?.id:n()[P.groupPopover]&&(k=n()[P.groupPopover].data?.id),k!==g()&&(m(k),o(r)),!i())return[];const B=p()[1];let H=[],_=[];if(B){for(let T of B.items)if(T.type===N&&T.id===k){K(T.name),H=T.items;break}}for(let T=0;T<H.length;T+=i())_.push({items:H.slice(T,T+i())});return H.length%i()==0&&_.push({items:[]}),_});function $e(k){return{left:`${(k()-l())*100}%`}}function ae(k){if(!h())return;const{key:B}=k;!B||(B===re.Left&&l()>0?o(H=>H-1):B===re.Right&&l()<Y().length-1&&o(H=>H+1))}let $={x:0,y:0},I;function L(k){!h()||(I=new Date,k.changedTouches?$={x:k.changedTouches[0].screenX,y:k.changedTouches[0].screenY}:$={x:k.screenX,y:k.screenY})}function A(k){if(!h()||new Date-I>500)return;I=null;let H={x:-1,y:-1};k.changedTouches?H={x:k.changedTouches[0].screenX,y:k.changedTouches[0].screenY}:H={x:k.screenX,y:k.screenY};const _=Fe($,H);if(!!_)if(_===se.right&&l()>0)o(T=>T-1);else if(_===se.left&&l()<Y().length-1)o(T=>T+1);else return}function j(){const k=it(_e(document.querySelector(".group-popover-wrapper")));k!==i()&&(s(k),o(r))}R(()=>{s(it(_e(document.querySelector(".group-popover-wrapper"))));const k=document.querySelector(".group-popover-wrapper");window.addEventListener("keydown",ae),k.addEventListener("touchstart",L),k.addEventListener("touchend",A),k.addEventListener("mousedown",L),k.addEventListener("mouseup",A),window.addEventListener("resize",j),b.onDragMove(e),b.onDragEnd(e,(B,H)=>{H.style.transform="scale(1)";const _=b.getData();_&&_.dragging&&(_.dragging.type!==N&&_.dropOn?.type===N?c(_.dragging.id,_.dropOn.id):_.dragging.type!==N&&_.dropOn?d(_.dragging.id,"before",_.dropOn.id,g()):_.dragging.type!==N&&_.dropOn||(_.dropBefore?d(_.dragging.id,"before",_.dropBefore.id,g()):_.dropAfter?d(_.dragging.id,"after",_.dropAfter.id,g()):d(_.dragging.id,"after","last",g())))})}),be(()=>{try{const k=document.querySelector(".group-popover-wrapper");window.removeEventListener("keydown",ae),k.removeEventListener("touchstart",L),k.removeEventListener("touchend",A),k.removeEventListener("mousedown",L),k.removeEventListener("mouseup",A),window.removeEventListener("resize",j)}catch(k){console.error(k)}});function le(k){let B="group-popover-tab";return k()===l()?B+" group-popover-tab-active":B}return(()=>{const k=Rn.cloneNode(!0),B=k.firstChild,H=B.nextSibling,_=e;return typeof _=="function"?_(k):e=k,y(k,u(Re,{get name(){return D()},get groupId(){return g()}}),B),y(B,u(Q,{get each(){return Y()},children:(T,ue)=>(()=>{const Z=Jn.cloneNode(!0);return C(()=>Z.className=le(ue)),Z})()})),y(H,u(Q,{get each(){return Y()},children:(T,ue)=>(()=>{const Z=zn.cloneNode(!0);return y(Z,u(xe,{style:{display:"blcok",height:"100%",width:"30px",position:"absolute",top:"0",left:"0"},callback:pe=>{ue()!==0&&o(Ce=>Ce-1)}}),null),y(Z,u(Q,{get each(){return T.items},children:pe=>u(Ue,{config:pe})}),null),y(Z,u(F,{get when(){return T.items.length<i()},get children(){return u(nt,{get parentId(){return g()}})}}),null),y(Z,u(xe,{style:{display:"blcok",height:"100%",width:"30px",position:"absolute",top:"0",right:"0"},callback:pe=>{ue()!==Y().length-1&&o(Ce=>Ce+1)}}),null),C(pe=>W(Z,$e(ue),pe)),Z})()})),C(()=>B.style.setProperty("display",h()?"inline-block":"none")),k})()}const Fn=v('<div class="popover-container add-entry-popover-container"></div>');function Kn(){const{keywords:t,addEntry:e}=E(J),{backToPrevLayer:a,currentScreenLayer:n}=E(z),p=w(()=>{let r={};return t().forEach(l=>r[l]=null),{data:[],placeholder:"Add keyword",secondaryPlaceholder:"+ keyword",limit:10,autocompleteOptions:{data:r,limit:5,minLength:1}}}),[f,c]=x({id:"",type:X.bookemark,url:"",icon:"",name:"",description:"",keywords:[]}),d=r=>l=>{if(r==="keywords")c(o=>({...o,keywords:[...new Set(l)].map(i=>i.tag)}));else{const o=l.target.value;c(i=>({...i,[r]:o}))}},h=()=>{if(!f().name||!f().url){G.toast({html:"Invalid: name and url are required!",classes:"red"});return}const r={...f(),id:De()};e(r,n().data?.parentId?.()),a()};return(()=>{const r=Fn.cloneNode(!0);return y(r,u(Re,{name:"Add Bookmark",disabled:!0}),null),y(r,u(U,{get children(){return u(S,{s12:!0,get children(){return[u(U,{get children(){return[u(S,{s12:!0,get children(){return u(V,{get onInput(){return d("name")},label:"* Site Name",get value(){return f().name},maxlength:"30",helperText:"Max length: 30; Required"})}}),u(S,{s12:!0,get children(){return u(V,{get onInput(){return d("url")},label:"* URL",get value(){return f().url},maxlength:"2000",helperText:"Max length: 2000; Required"})}}),u(S,{s12:!0,get children(){return u(V,{get onInput(){return d("icon")},label:"Icon URL",get value(){return f().icon},maxlength:"200",helperText:"Max length: 200"})}}),u(S,{s12:!0,get children(){return u(Ze,{get onInput(){return d("description")},label:"Site Description",get value(){return f().description},maxlength:"300",helperText:"Max length: 300"})}}),u(S,{s12:!0,get children(){return u(et,{get options(){return p()},get onChange(){return d("keywords")},label:"Keywords",helperText:"Limit: 10 keywords"})}})]}}),u(U,{className:"submit-button",get children(){return u(he,{onClick:h,icon:"save",children:"Save Changes"})}})]}})}}),null),r})()}const Xn=v('<div class="popover-container add-entry-popover-container"></div>');function Yn(){const{keywords:t,updateEntry:e}=E(J),{backToPrevLayer:a,currentScreenLayer:n}=E(z),[p,f]=x({id:n().data?.id,type:X.bookemark,url:n().data?.url,icon:n().data?.icon,name:n().data?.name,description:n().data?.description,keywords:n().data?.keywords}),c=w(()=>{let r={};t().forEach(o=>r[o]=null);let l=[];return p()?.keywords&&Array.isArray(p().keywords)&&(l=p().keywords.map(o=>({tag:o}))),{data:l,placeholder:"Add keyword",secondaryPlaceholder:"+ keyword",limit:10,autocompleteOptions:{data:r,limit:5,minLength:1}}});ke(()=>{f({id:n().data?.id,type:X.bookemark,url:n().data?.url,icon:n().data?.icon,name:n().data?.name,description:n().data?.description,keywords:n().data?.keywords})});const d=r=>l=>{if(r==="keywords")f(o=>({...o,keywords:[...new Set(l)].map(i=>i.tag)}));else{const o=l.target.value;f(i=>({...i,[r]:o}))}},h=()=>{if(!p().name||!p().url){G.toast({html:"Invalid: name and url are required!",classes:"red"});return}e(p()),a()};return(()=>{const r=Xn.cloneNode(!0);return y(r,u(Re,{name:"Edit Bookmark",disabled:!0}),null),y(r,u(U,{get children(){return u(S,{s12:!0,get children(){return[u(U,{get children(){return[u(S,{s12:!0,get children(){return u(V,{get onInput(){return d("name")},label:"* Site Name",get value(){return p().name},maxlength:"30",helperText:"Max length: 30; Required"})}}),u(S,{s12:!0,get children(){return u(V,{get onInput(){return d("url")},label:"* URL",get value(){return p().url},maxlength:"2000",helperText:"Max length: 2000; Required"})}}),u(S,{s12:!0,get children(){return u(V,{get onInput(){return d("icon")},label:"Icon URL",get value(){return p().icon},maxlength:"200",helperText:"Max length: 200"})}}),u(S,{s12:!0,get children(){return u(Ze,{get onInput(){return d("description")},label:"Site Description",get value(){return p().description},maxlength:"300",helperText:"Max length: 300"})}}),u(S,{s12:!0,get children(){return u(et,{get options(){return c()},get onChange(){return d("keywords")},label:"Keywords",helperText:"Limit: 10 keywords"})}})]}}),u(U,{className:"submit-button",get children(){return u(he,{onClick:h,icon:"save",children:"Save Changes"})}})]}})}}),null),r})()}const Wn=v('<div class="search-popover-back-btn"><i class="material-icons">arrow_back</i></div>'),Qn=v('<div class="search-popover-searchbar-container"></div>'),Vn=v('<div class="search-popover-search-result-container"></div>'),Zn=v('<div><div class="entry-container"></div><div><span class="entry-title search-result-item-title"></span><span class="entry-title search-result-item-keywords"></span></div></div>'),er=v('<div class="search-result-item-desc"></div>');function ot(t,e){const a=t.name?.toLowerCase()||"",n=t.description?.toLowerCase()||"",p=t.keywords?.join(", ")?.toLowerCase()||"";return`${a}, ${n}, ${p}`.match(e)!==null}const st=["#fcfc36","#acfc36","#36fcf7","#3693fc","#d836fc","#f2858d","#bcf2d8"];let ye={};function Je(t,e){if(!t||!e)return"";let a=new RegExp(e.split(",").filter(c=>c!=="").join("|"),"gi"),n=[],p;for(;p=a.exec(t);)n.push(p);let f=t.split("");return n.forEach(c=>{ye[c[0]]||(ye[c[0]]=st[Object.keys(ye).length%st.length]),f[c.index]=`<span class="highlight" style="background-color: ${ye[c[0]]};">${c[0]}</span>`;for(let d=1;d<c[0].length;d++)f[d+c.index]=void 0}),f.filter(c=>c!==void 0).join("")}function tr(t){let e;const{getUserHomepageConfig:a}=E(J),{currentScreenLayer:n,backToPrevLayer:p}=E(z),f=w(()=>n().type===P.searchPopover),[c,d]=x("");ke(()=>{f()?e.focus():e.blur()});const h=w(()=>{ye={};let r=[];if(c()===""||c().length<2)return r;const l=a()[1].items;let o=new RegExp(c().split(",").filter(i=>i!=="").join("|"));for(let i of l)if(i.type===N)for(let s of i.items)ot(s,o)&&r.push({...s});else ot(i,o)&&r.push({...i});return r.forEach(i=>{const s=Je(i.name?.toLowerCase()||"",c()),g=Je(i.description?.toLowerCase()||"",c()),m=Je(i.keywords?.join(", ")?.toLowerCase()||"",c());i.nameEle=document.createElement("div"),i.nameEle.innerHTML=s,g&&(i.descriptionEle=document.createElement("div"),i.descriptionEle.innerHTML=g),m&&(i.keywordsEle=document.createElement("div"),i.keywordsEle.innerHTML=m)}),r});return[(()=>{const r=Wn.cloneNode(!0);return r.$$click=()=>p(),r})(),(()=>{const r=Qn.cloneNode(!0);return y(r,u(U,{style:{display:"flex",width:"100%","align-items":"center","justify-content":"center",margin:"0"},get children(){return u(S,{s10:!0,m9:!0,l8:!0,xl7:!0,style:{margin:0},get children(){return u(Xt,{ref(l){const o=e;typeof o=="function"?o(l):e=l},get value(){return c()},onInput:l=>{d(l.target.value.replaceAll(" ",""))}})}})}})),r})(),(()=>{const r=Vn.cloneNode(!0);return r.$$click=l=>p(),y(r,u(U,{get children(){return u(S,{s10:!0,m9:!0,l8:!0,xl7:!0,get children(){return u(Q,{get each(){return h()},children:l=>u(U,{className:"search-result-item",onClick:o=>{o.preventDefault(),o.stopPropagation(),window.open(l.url)},get children(){return[(()=>{const o=Zn.cloneNode(!0),i=o.firstChild,s=i.nextSibling,g=s.firstChild,m=g.nextSibling;return o.style.setProperty("display","flex"),o.style.setProperty("height","55px"),o.style.setProperty("overflow","hidden"),s.style.setProperty("display","flex"),s.style.setProperty("flex-direction","column"),s.style.setProperty("width","calc(100% - 55px)"),s.style.setProperty("padding","0 15px"),y(g,()=>l.nameEle),y(m,()=>l.keywordsEle),C(()=>i.style.setProperty("background-image",l.icon?`url("${l.icon}")`:void 0)),o})(),(()=>{const o=er.cloneNode(!0);return y(o,()=>l.descriptionEle),o})()]}})})}})}})),r})()]}q(["click"]);const nr=v('<div class="application-container"></div>'),rr=v('<div class="adroid-bottom-op-bar"><div><i class="material-icons">keyboard_arrow_left</i></div><div><i class="material-icons">home</i></div><div><i class="material-icons">tab</i></div></div>');function ir(t){const{currentScreenLayer:e,backToPrevLayer:a}=E(z),{applications:n,currentApplication:p}=E(de);w(()=>e().type===P.applicationPopover);function f(){const c=n()?.[p()]?.application;if(c)return u(c,{})}return[(()=>{const c=nr.cloneNode(!0);return y(c,f),c})(),(()=>{const c=rr.cloneNode(!0),d=c.firstChild,h=d.nextSibling;return d.$$click=()=>a(),h.$$click=()=>a(),c})()]}q(["click"]);const or=v('<div class="popovers"><div class="popover-bg"></div></div>');function ve(t){let e;const{moveEntryOutFromMoniGroup:a}=E(J),n=w(()=>t.config),{backToPrevLayer:p,register:f}=E(z);function c(r){switch(r){case M.group:return u(jn,{});case M.addEntry:return u(Kn,{});case M.editEntry:return u(Yn,{});case M.search:return u(tr,{});case M.application:return u(ir,{});default:return null}}const d={[M.group]:P.groupPopover,[M.addEntry]:P.addBookmarkPopover,[M.editEntry]:P.editBookmarkPopover,[M.search]:P.searchPopover,[M.application]:P.applicationPopover};let h;return R(()=>{f({type:d[n().type],ref:h}),b.onDragMove(e),b.onDragEnd(e,(r,l)=>{const o=b.getData();o&&o.dragging&&(a(o.dragging.id,-1),p())})}),(()=>{const r=or.cloneNode(!0),l=r.firstChild,o=h;typeof o=="function"?o(r):h=r,Ne(l,"click",p,!0);const i=e;return typeof i=="function"?i(l):e=l,y(r,()=>c(n().type),null),r})()}q(["click"]);function sr(){const{getUserHomepageConfig:t,setUserConfig:e,userConfig:a}=E(J),n=w(()=>a()?.homepages?.length>0),[p,f]=x(!1);return ke(()=>{p()&&(G.showLoader(),te.initData().then(c=>{e(c),G.hideLoader()}).catch(c=>{console.error(c),G.toast({html:"Failed to initialize app",classes:"red"}),te.setLocalConfig({token:"",gistid:""}),f(!1),G.hideLoader()}))}),R(()=>{f(!!te.getToken())}),[u(Sn,{isSignedIn:p}),u(F,{get when(){return!p()},get children(){return u(qn,{setIsSignedIn:f})}}),u(F,{get when(){return n()},get children(){return[u(Hn,{get config(){return a().homepages}}),u(ve,{get config(){return{type:M.group}}}),u(ve,{get config(){return{type:M.addEntry}}}),u(ve,{get config(){return{type:M.editEntry}}}),u(ve,{get config(){return{type:M.search}}}),u(ve,{get config(){return{type:M.application}}})]}})]}const ar=v('<div class="app"></div>');function dr(){return(()=>{const t=ar.cloneNode(!0);return y(t,u(gt,{get children(){return u($t,{get children(){return u(kt,{get children(){return u(sr,{})}})}})}}),null),y(t,u(Qt,{}),null),t})()}export{dr as m};
